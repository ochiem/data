<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BINANCE-ERC :: MULTI CHECKER</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.7.0/css/uikit.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.7.0/js/uikit.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

    <link rel="icon" href="https://icons.iconarchive.com/icons/cjdowner/cryptocurrency-flat/512/Ethereum-ETH-icon.png" type="image/x-icon">
    <script
    src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"
    integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
</head>
<style>
     #scanprogress {
        font-size: 16px;
        color: #0b0808;
      }
      #scanbar {
        text-align: center;
        width:100%;
        height:21px;
        border:1px solid #000;
        margin:5px 0px;
      }
      #bar {
        width:100%;
        background-color:#f2dfa8;
        height:100%;
      }
        .binance {
            text-align: center;
            background-color: rgb(250 189 36); /* Ganti dengan warna yang Anda inginkan */
       }
       img:hover {
                transform: scale(1.5); /* You can adjust the scale factor as needed */
            }
        a{
            color:black;
        }
        a:hover{
            color:rgb(0, 4, 128);
        }
        .ijo {
        color: black;
        background-color:rgb(231 255 127);
      }

      .biru {
        color: black;
        background-color:rgb(238 170 231);
      }

      .merah{
        color: rgb(250, 249, 249) !important;
        background-color:#e4322c!important;
      }
      .error{
        color: #353030;
        background-color: #f48925!important;
      }
      .INCH {
            text-align: center;
        background-color: #f0ebdc; /* Ganti dengan warna yang Anda inginkan */
       }
       .MATCHA {
            text-align: center;
        background-color: #abd2fb; /* Ganti dengan warna yang Anda inginkan */
       }
       .ODOS {
            text-align: center;
        background-color: rgb(220, 255, 231); /* Ganti dengan warna yang Anda inginkan */
       }
        .uk-container {
            width: 96%;
            max-width: none;
        }

        .sticky-header {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
           
        }

        /* Style untuk sel dalam header */
        .sticky-header th {    
            background-color: #f2dfa8;
            font-weight: bold;
            font-size: large;
            text-align: center;
            font-size: 14px;
            height: 20px;
            vertical-align: middle;
            margin: 3px 0px; 
        }

        /* Style untuk isi tabel */
        .table-content {
            overflow-y: auto;
            max-height: 800px; /* Tentukan ketinggian maksimum tabel yang ingin Anda tampilkan */
        }
        .uk-table td, .uk-table th {
            margin: 3px 0px; /* Ubah nilai margin sesuai kebutuhan */
            padding: 6px 0px; /* Ubah nilai padding sesuai kebutuhan */
            font-size: 13px;
            vertical-align: middle;
        }
        .uk-table-striped-custom > tbody > tr:nth-child(4n-3),
        .uk-table-striped-custom > tbody > tr:nth-child(4n-2) {
            background-color: #f0f0f0; /* Warna striping disesuaikan sesuai keinginan Anda */
        }

        .custom-thead input[type="number"] {
            background-color: inherit;
            padding: 5px;
            border: none;
            width: 60px; /* Adjust the width as needed */
            text-align: center; /* Center the text within the input */
        }

        /* Style $ symbol next to the input elements */
        .custom-thead th input[type="number"]::after {
            content: "$";
            margin-left: 0px; /* Adjust the margin as needed */
            color: inherit;
        }

        /* Optional: Style the $ symbol inside the input for better alignment */
        .custom-thead th input[type="number"] {
            padding-right: 0px; /* Adjust the padding as needed */
            box-sizing: border-box;
            color: red;
        }
</style>
<body>
    <hr/>
    <h2  style="color:rgb(73, 79, 247); margin:0px 0px; text-align: center;">BINANCE ERC MULTICHECKER v7
        [&nbsp;
        <img id="syncDATA" title="SINKRONISASI DATA" src="https://cdn.icon-icons.com/icons2/2596/PNG/512/database_sync_icon_155524.png" width="26px" />
        <img id="open-modal" title="SETTING DATA" src="https://cdn-icons-png.flaticon.com/512/7588/7588701.png" width="26px" />
         <img id="cek_wallet" title="CEK WALLET BINANCE" src="https://cdn-icons-png.flaticon.com/512/3757/3757881.png" width="26px" />
        &nbsp;]
      </h2>
    <!-- Modal UIKIT -->
    <div id="modal-setting" class="uk-modal-full" uk-modal>
        <div class="uk-modal-dialog">
            <button class="uk-modal-close-full uk-close-large" type="button" uk-close></button>
            <div class="uk-modal-header">
                <h2 class="uk-modal-title">:: SETTING DEX CHECKER</h2>
               
            </div>
            <div class="uk-modal-body">
                <form> 
                    <!-- Grid UIkit untuk 2 kolom -->
                    <div class="uk-grid-small" uk-grid>
                        
                        <div class="uk-width-1-2">
                            
                            <!-- Kolom pertama -->
                            <div class="uk-card uk-card-default uk-card-body">
                                <h3 style="text-align: center; margin: 12px 0px; color: #1317e1;">:: SETINGAN PERMODALAN</h3>
                                <!-- Modal 1INCH -->
                                <h5 style="margin: 12px 0px;color: #e4322c;">Modal 1INCH</h5>

                                <!-- Modal Kecil -->
                                <div class="uk-flex uk-flex-middle ">
                                    <div >
                                        <label for="mKiriKecil1INCH" class="uk-text-primary">Kiri Kecil</label>
                                        <input type="number" id="mKiriKecil1INCH" class="uk-input" value="" required>
                                    </div>
                                    <div >
                                    <label for="mKananKecil1INCH" class="uk-text-success">Kanan Kecil</label>
                                    <input type="number" id="mKananKecil1INCH" class="uk-input" value="" required>
                                </div>
                                </div>

                                <h5 style="margin: 12px 0px; color: #e4322c;">Modal ODOS</h5>                                                    
                            <!-- Modal Kecil -->
                            <div class="uk-flex uk-flex-middle ">
                                <div >
                                    <label for="mKiriKecilODOS" class="uk-text-primary">Kiri Kecil</label>
                                    <input type="number" id="mKiriKecilODOS" class="uk-input" value="" required>
                                </div>
                                <div >
                                <label for="mKananKecilODOS" class="uk-text-success">Kanan Kecil</label>
                                <input type="number" id="mKananKecilODOS" class="uk-input" value="" required>
                            </div>
                            </div>


                                <!-- Modal MATCHA -->
                                <h5 style="margin: 12px 0px; color: #e4322c;">Modal MATCHA</h5>
                            <!-- Modal Kecil -->
                                <div class="uk-flex uk-flex-middle ">
                                <div >
                                    <label for="mKiriKecilMATCHA" class="uk-text-primary">Kiri </label>
                                    <input type="number" id="mKiriKecilMATCHA" class="uk-input" value="" required>
                                </div>
                                <div >
                                    <label for="mKananKecilMATCHA" class="uk-text-success">Kanan </label>
                                    <input type="number" id="mKananKecilMATCHA" class="uk-input" value="" required>
                                </div>
                            </div>
                            
                                <!-- Modal OPEN -->
                                <h5 style="margin: 12px 0px; color: #e4322c;">Modal OPEN</h5>
                            <!-- Modal Kecil -->
                            <div class="uk-flex uk-flex-middle ">
                                <div>
                                    <label for="mKiriKecilOPEN" class="uk-text-primary">Kiri </label>
                                    <input type="number" id="mKiriKecilOPEN" class="uk-input" value="" required>
                                </div>
                                <div>
                                    <label for="mKananKecilOPEN" class="uk-text-success">Kanan </label>
                                    <input type="number" id="mKananKecilOPEN" class="uk-input" value="" required>
                                </div>
                            </div> 
                            
                            <h5 style="margin: 12px 0px;color: #e4322c;">Modal KYBER</h5>
                            <div class="uk-flex uk-flex-middle ">
                            <div>
                                <label for="mKiriKecilKYBER" class="uk-text-primary">Kiri</label>
                                <input type="number" id="mKiriKecilKYBER" class="uk-input" value="" required>
                            </div>
                                <div>
                                <label for="mKananKecilKYBER" class="uk-text-success">Kanan</label>
                                <input type="number" id="mKananKecilKYBER" class="uk-input" value="" required>
                            </div>
                            </div>
                            </div>
                        </div>
                        <div class="uk-width-1-2">
                            <!-- Kolom kedua -->
                            <div class="uk-card uk-card-default uk-card-body">
                                <h3 style="text-align: center; margin: 12px 0px; color: #1317e1;">:: SETINGAN SCANNER</h3>
                                <div >
                                <h5>
                                    <label for="koin-group" class="uk-text-danger">SCAN PERKOIN : </label>
                                    <label class="uk-form-label uk-text-success"><input class="uk-radio" type="radio" value="4" name="koin-group"> 4</label>
                                    <label class="uk-form-label uk-text-success"><input class="uk-radio" type="radio" value="5" checkbox name="koin-group"> 5</label>
                                    <label class="uk-form-label uk-text-success"><input class="uk-radio" type="radio" value="3"  name="koin-group"> 3</label> 
                                </h5>
                                </div>
                                <h5 style="margin: 12px 0px; font-weight: bolder;  color: #2f2ce4; text-align: center;">
                                    <div class="uk-flex uk-flex-middle ">
                                        <div>
                                            <label  class="uk-text-primary">API1 </label>
                                            <input type="text" id="api1" class="uk-input" value="" required>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <div>
                                            <label  class="uk-text-primary">API2 </label>
                                            <input type="text" id="api2" class="uk-input" value="" required>
                                        </div>
                                    </div>  
                                    <div class="uk-flex uk-flex-middle ">
                                        <div>
                                            <label  class="uk-text-primary">API3 </label>
                                            <input type="text" id="api3" class="uk-input" value="" required>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <div>
                                            <label  class="uk-text-primary">API4 </label>
                                            <input type="text" id="api4" class="uk-input" value="" required>
                                        </div>
                                    </div>  
                                    <div class="uk-flex uk-flex-middle ">
                                        <div>
                                            <label  class="uk-text-primary">API5 </label>
                                            <input type="text" id="api5" class="uk-input" value="" required>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <div>
                                            <label  class="uk-text-primary">API6 </label>
                                            <input type="text" id="api6" class="uk-input" value="" required>
                                        </div>
                                    </div>  
                                    <div class="uk-flex uk-flex-middle ">
                                        <div>
                                            <label  class="uk-text-primary">API7 </label>
                                            <input type="text" id="api7" class="uk-input" value="" required>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <div>
                                            <label  class="uk-text-primary">API8 </label>
                                            <input type="text" id="api8" class="uk-input" value="" required>
                                        </div>
                                    </div>  
                                    <div class="uk-flex uk-flex-middle ">
                                        <div>
                                            <label  class="uk-text-primary">API9 </label>
                                            <input type="text" id="api9" class="uk-input" value="" required>
                                        </div>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <div>
                                            <label  class="uk-text-primary">API10 </label>
                                            <input type="text" id="api10" class="uk-input" value="" required>
                                        </div>
                                    </div>  
                                </h5>
                                <div class="uk-flex uk-flex-middle uk-margin ">
                                 <!-- <div style="display: none;"> -->
                                    <div>
                                        <label for="jeda-time-group" class="uk-text-danger">JEDA / GROUP</label><br/>
                                        <input class="uk-input" id="jeda-time-group" type="number" value="150" name="jeda-time-group" >
                                    </div>
                                    <div>
                                        <label for="jeda-koin" class="uk-text-primary">JEDA / KOIN</label><br/>
                                        <input class="uk-input" type="number" id="jeda-koin" value="30" name="jeda-koin" > 
                                    </div>
                                    <div>
                                        <label for="waktu-tunggu" class="uk-text-danger">TIMEOUT / DETIK (5)</label><br/>
                                        <input class="uk-input" id="waktu-tunggu" type="number" value="5" name="waktu-tunggu" >
                                    </div>
                                    <div>
                                        <label for="jeda-koin" class="uk-text-warning">FILTER PNL</label><br/>
                                        <input class="uk-input" type="number" id="inFilterPNL" value="0" name="filterpnl" > 
                                    </div>
                                </div>

                                <div>
                                    <label class="uk-text-primary">:: SELECT PAIR DEX</label>
                                    <br/>
                                    <small>
                                        <br/> 
                                        <input type="radio" checked name="dex-radio" value="ETH"> ETH | 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 | 18 <br/> 
                                        <input type="radio" name="dex-radio" value="SDEX"> SDEX | 0x5DE8ab7E27f6E7A1fFf3E5B337584Aa43961BEeF | 18 <br/> 
                                        <input type="radio" name="dex-radio" value="BNT"> BNT | 0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C | 18 
                                    </small>
                                    <br/>

                                    <label for="sc-address">SC Address:</label>
                                    <input type="text" id="sc-addresspair" value="" class="uk-input" >

                                    <label for="des-pair">Des Pair:</label>
                                    <input type="text" id="des-pair" value="" class="uk-input" >

                                    <label for="symbo-pair">Symbol Pair:</label>
                                    <input type="text" id="symbol-pair" value="" class="uk-input" >
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tombol untuk menutup modal -->
                    <p class="uk-text-right">
                        <button class="uk-button uk-button-default uk-modal-close" type="button">Tutup</button>
                        <button type="button" id="save-button" class="uk-button uk-button-primary">SIMPAN</button>  
                    </p>
             
                   
                </form>
            </div>
        </div>
    </div>

    <div class="uk-container uk-margin-top">
        <form>
        <div class="uk-margin">
             <div class="uk-grid uk-child-width-1-5@s " uk-grid>
                <!-- <div class="uk-flex uk-flex-wrap uk-grid-divider"> -->
        
                <div  class="uk-width-auto@m">
                    <div>
                        <label class="uk-form-label uk-text-primary" > :: PERMODALAN </label> <br/>
                        <label class="uk-form-label uk-text-primary" > KIRI &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: </label>
                        <label class="uk-form-label uk-text-success" >
                             <input type="checkbox" class="uk-checkbox"  checked id="ls" />&nbsp;KECIL
                        </label>    
                      
                        <br/>
                        <label class="uk-form-label uk-text-primary" > KANAN : </label>
                        <label class="uk-form-label uk-text-success" > 
                            <input type="checkbox" class="uk-checkbox"  checked id="rs" />&nbsp;KECIL 
                        </label>    
                        <br/>   
                        @  <label class="uk-form-label uk-text-primary" ></label> <label class="uk-form-label uk-text-warning" id="pairDex" ></label> <label class="uk-form-label uk-text-danger" id="LPriceRate" ></label>
                    </div>
                </div>

                <div class="uk-width-auto@m" >
                    <div class="uk-form-label uk-text-secondary" >
                        <label class="uk-form-label uk-text-primary" > :: SETTING APLIKASI </label> <br/>
                        <label class="uk-form-label uk-text-warning" >TOTAL KOIN :  </label> <label class="uk-form-label uk-text-primary" id="JmlKoin" ></label> KOIN<br/>
                        <label class="uk-form-label uk-text-success"> JUMLAH GROUP / JEDA : </label> <label class="uk-form-label uk-text-primary" id="LKoinGroup" ></label> / <label class="uk-form-label uk-text-primary" id="LjedaTimeGroup" ></label><br/>
                        <label class="uk-form-label uk-text-danger" >JEDA PERKOIN & TUNGGU :  </label>  <label class="uk-form-label uk-text-primary" id="LjedaKoin" ></label> / <label class="uk-form-label uk-text-primary" id="Lwaktu-tunggu" ></label> <br/>
                        :: <label class="uk-form-label uk-text-primary" >Filter PNL : </label> <label class="uk-form-label uk-text-warning" id="LFilterPNL" ></label> &nbsp;
                    </div>
                </div>

                <div  class="uk-width-auto@m">
                    <div>
                        <label class="uk-form-label uk-text-warning" id="server">PILIHAN SERVER : </label>  
                    </div>                                       
                    <div>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="0" checkbox  name="urlRadio"> SERVER01</label>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="1" name="urlRadio"> SERVER02</label><br/>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="2" name="urlRadio"> SERVER03</label>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="3" name="urlRadio"> SERVER04</label> <br/>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="4" name="urlRadio"> SERVER05</label>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="5" name="urlRadio"> SERVER06</label>         
                    </div>
                </div>

                <div  class="uk-width-auto@m">
                    <div>
                        <label class="uk-form-label uk-text-secondary" > MARKET & PAIR DEX</label>                    
                    </div>
                    <label class="uk-form-label uk-text-primary" > 
                        <input type="checkbox" class="uk-checkbox cdx_1inch" checked id="D1INCH" /> <span id="modalLP1INCH">&nbsp;1INCH&nbsp;</span>
                        <input type="checkbox" class="uk-checkbox cdx_odos" checked id="DODOS" /> <span id="modalLPODOS">&nbsp;ODOS&nbsp;</span> <br/>
                        <input type="checkbox" class="uk-checkbox cdx_matcha" checked id="DMATCHA" /> &nbsp; MATCHA
                        <input type="checkbox" class="uk-checkbox cdx_kyber" checked id="DKYBER" /> &nbsp; KYBER   
                        <input type="checkbox" class="uk-checkbox cdx_open"   id="DOPEN" /> &nbsp; OPEN
                    </label>
                    
                    <br/><input type="checkbox" class="uk-checkbox"  id="Cautorun" /> <span class="uk-form-label uk-text-danger uk-text-small" id="autorun"> AUTORUN</span>
                    <button class="uk-button uk-button-small uk-button-primary" type="button" style="display: none;" id="startSCAN">START</button>                      
                    <input type="radio" name="toggle" checked  value="option2"> A
                    <input type="radio" name="toggle" value="option1"> Z  
                    <button class="uk-button uk-button-small uk-button-danger" type="button" id="refresh">STOP</button>
                </div>

                <div class="uk-width-auto@m uk-width-expand@m">
                        <label class="uk-text uk-text-danger" id="ip">...</label> <br/>  
                        
                        <label class="uk-text uk-text-small uk-text-danger" id="cek"></label>                
                         <div class="uk-text uk-text-small uk-text-primary ">                        
                        1INCH [ <label class="uk-text uk-text-small uk-text-primary" id="sinyal1inch"> </label> ]<br/> 
                        ODOS [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalodos">  </label> ]<br/>
                        MATCHA [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalmatcha"> </label> ]<br/> 
                        KYBER [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalkyber"> </label> ]<br/>
                        OPEN [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalopen"> </label> ]<br/> 
                        </div>
                </div>


            </div>  
        </div> 

        </form>

        <label class="uk-text uk-text-success" id="hasil"></label> <div id="scanprogress">Wait</div> 
        <div id="scanbar">
            <div id="bar" style="text-align: center;"> </div>
        </div>
        
    </div>
 <!-- Modal LIST LP 1INCH -->
    <div uk-modal id="myModalLP1INCH">
        <div class="uk-modal-dialog">
          <button class="uk-modal-close-default" type="button" uk-close></button>
          <div class="uk-modal-header">
            <h5 class="uk-modal-title">LIVE :: DAFTAR LP 1INCH</h5>
          </div>
          <div class="uk-modal-body">
            <div id="apiResult1INCH">
              <span id="checkboxLP1INCH"></span>
            </div>
          </div>
          <div class="uk-modal-footer uk-text-right">
            <button class="uk-button uk-button-danger uk-modal-close" type="button">TUTUP</button>
            <button id="simpanlp1inch" class="uk-button uk-button-primary">SIMPAN</button>
          </div>
        </div>
    </div>

    <!-- Modal LIST LP ODOS -->
    <div uk-modal id="myModalLPODOS">
    <div class="uk-modal-dialog">
        <button class="uk-modal-close-default" type="button" uk-close></button>
        <div class="uk-modal-header">
        <h5 class="uk-modal-title">LIVE :: DAFTAR LP ODOS</h5>
        </div>
        <div class="uk-modal-body">
        <div id="apiResultODOS">
            <span id="checkboxLPODOS"></span>
        </div>
        </div>
        <div class="uk-modal-footer uk-text-right">
        <button class="uk-button uk-button-danger uk-modal-close" type="button">TUTUP</button>
        <button id="simpanlpODOS" class="uk-button uk-button-primary">SIMPAN</button>
        </div>
    </div>
    </div>
      
   <!-- TABEL HASIL SCANNER -->
    <div class="uk-container uk-flex-center uk-flex-middle uk-table-hover">
        <div class="tableFixHead table-content">
            <table class="uk-table  uk-sticky uk-table-striped-custom ">
                <thead class="custom-thead uk-overflow-auto sticky-header">
            <!-- <div class="table-content">
                <table class="uk-table uk-sticky uk-table-striped-custom">
                    <thead class="sticky-header"> -->
                    <tr>                            
                        <th  class="uk-text-danger dx_1inch"> <span class="uk-badge" id="lKiri1INCHSinyal"></span> 1INCH </th>
                        <th  class="uk-text-secondary dx_odos"> <span class="uk-badge" id="lKiriODOSSinyal"></span> ODOS </th>
                        <th class="uk-text-primary dx_matcha"> <span class="uk-badge" id="lKiriMATCHASinyal"></span> MATCHA</th>
                        <th class="uk-text-primary dx_kyber"> <span class="uk-badge" id="lKiriKYBERSinyal"></span> KYBER</th>
                        <th class="uk-text-warning dx_open"> <span class="uk-badge" id="lKiriOPENSinyal"></span> OPEN</th>
                        <th rowspan="2" style="background-color: #91b2ec; color: rgb(10, 11, 12);">&nbsp;MODAL <br/>& TOKEN&nbsp;</th>
                        <th  class="uk-text-danger dx_1inch"> <span class="uk-badge" id="lKanan1INCHSinyal"></span> 1INCH </th>
                        <th  class="uk-text-secondary dx_odos"> <span class="uk-badge" id="lKananODOSSinyal"></span> ODOS </th>
                        <th class="uk-text-primary dx_matcha"> <span class="uk-badge" id="lKananMATCHASinyal"></span> MATCHA </th>
                        <th class="uk-text-primary dx_kyber"> <span class="uk-badge" id="lKananKYBERSinyal"></span> KYBER</th>
                        <th class="uk-text-warning dx_open"> <span class="uk-badge" id="lKananOPENSinyal"></span> OPEN </th>
                    </tr>
                    <tr>                            
                        <th  class="uk-text-danger dx_1inch"> <input type="number" id="in_mKiriKecil1INCH" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_odos"> <input type="number" id="in_mKiriKecilODOS" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_matcha"> <input type="number" id="in_mKiriKecilMATCHA" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_kyber"> <input type="number" id="in_mKiriKecilKYBER" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_open"> <input type="number" id="in_mKiriKecilOPEN" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_1inch"> <input type="number" id="in_mKananKecil1INCH" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_odos"> <input type="number" id="in_mKananKecilODOS" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_matcha"> <input type="number" id="in_mKananKecilMATCHA" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_kyber"> <input type="number" id="in_mKananKecilKYBER" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_open"> <input type="number" id="in_mKananKecilOPEN" class="uk-input" value="" required> $</th>
                    </tr>
                </thead>
                
                <tbody id="TabelBINANCE" style="text-align: center;"></tbody>
            </table>
        </div>
    </div>    

<script>
$(document).ready(function () {
        //SETTING GLOBAL
        var ME_savedData = JSON.parse(localStorage.getItem('ME_DATA_SETTING')) || {};
        var ME_savedDataModal = JSON.parse(localStorage.getItem('ME_DATA_MODAL')) || {};
        var tokens= ME_savedData.LIST_TOKEN;
        var ME_savedDataID = JSON.parse(localStorage.getItem('ME_ID'));
//        var groupSize = 4;
        var groupSize = ME_savedData.KoinGroup; 
        var interval = ME_savedData.jedaTimeGroup; 
        var intervalKoin = ME_savedData.jedaKoin; 
        var autorun = false;
        cekDataAwal();
        setNullInfo();
        createRadioButtons();
        selectPair();

        function selectPair(){
            $('input[type=radio][name=dex-radio]').change(function() {
        // Cek radio button mana yang dipilih
                if (this.value === 'ETH') {
                    $('#sc-addresspair').val('0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2');
                    $('#des-pair').val('18');
                    $('#symbol-pair').val('ETH');
                }
                else if (this.value === 'SDEX') {
                    $('#sc-addresspair').val('0x5DE8ab7E27f6E7A1fFf3E5B337584Aa43961BEeF');
                    $('#des-pair').val('18');
                    $('#symbol-pair').val('SDEX');
                }
                else if (this.value === 'BNT') {
                    $('#sc-addresspair').val('0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C');
                    $('#des-pair').val('18');
                    $('#symbol-pair').val('BNT');
                }
            });
        }
        function setNullInfo(){
            localStorage.setItem('ME_Kiri1INCHSinyal',0);
            localStorage.setItem('ME_Kanan1INCHSinyal',0);

            localStorage.setItem('ME_KiriODOSSinyal',0);
            localStorage.setItem('ME_KananODOSSinyal',0);
            
            localStorage.setItem('ME_KiriMATCHASinyal',0);
            localStorage.setItem('ME_KananMATCHASinyal',0);

            localStorage.setItem('ME_KiriOPENSinyal',0);
            localStorage.setItem('ME_KananOPENSinyal',0);

            localStorage.setItem('ME_KiriKYBERSinyal',0);
            localStorage.setItem('ME_KananKYBERSinyal',0);
                
            $("#lKiri1INCHSinyal").text("");
            $("#lKanan1INCHSinyal").text("");

            $("#lKiriODOSSinyal").text("");
            $("#lKananODOSSinyal").text("");

            $("#lKiriMATCHASinyal").text("");
            $("#lKananMATCHASinyal").text("");

            $("#lKiriOPENSinyal").text("");
            $("#lKananOPENSinyal").text("");

            $("#lKiriKYBERSinyal").text("");
            $("#lKananKYBERSinyal").text("");

            $("#sinyal1inch").text("");
            $("#sinyalodos").text("");
            $("#sinyalmatcha").text("");
            $("#sinyalopen").text("");
            $("#sinyalkyber").text("");


            var dataLPODOS = localStorage.getItem('ME_LPODOS');
            var jumlahLPODOS = dataLPODOS ? JSON.parse(dataLPODOS).length : 0;
            $("#modalLPODOS").text("ODOS [ "+jumlahLPODOS+" ]"); 

            var dataLP1INCH = localStorage.getItem('ME_LP1INCH');
            var jumlahLP1INCH = dataLP1INCH ? JSON.parse(dataLP1INCH).length : 0;
            $("#modalLP1INCH").text("1INCH [ "+jumlahLP1INCH+" ]"); 
        }

        // CEK SEMUA DATA AWAL
        function cekDataAwal(){     
            var ME_LP1INCH = JSON.parse(localStorage.getItem('ME_LP1INCH'));
            var ME_LPODOS = JSON.parse(localStorage.getItem('ME_LPODOS'));
            var ME_SERVERCORS = JSON.parse(localStorage.getItem('ME_SERVERCORS'));
            var ME_DATA_MASTER = JSON.parse(localStorage.getItem('ME_DATA_MASTER'));
            var ME_DATA_SETTING = JSON.parse(localStorage.getItem('ME_DATA_SETTING'));
            var ME_DATA_MODAL = JSON.parse(localStorage.getItem('ME_DATA_MODAL'));

            // Inisialisasi status validasi
            var isDataMasterValid = true;
            var isLP1INCHValid = true;
            var isLPODOSValid = true;
            var isServerCorsValid = true;
            var isDataSettingValid = true;
            var isDataSettingModalValid = true;

            // Validasi ME_DATA_MASTER
            if (ME_DATA_MASTER === null || ME_DATA_MASTER === undefined || Object.keys(ME_DATA_MASTER).length === 0) {
                isDataMasterValid = false;
                $("#cek").append("SINKRONISASI DATA DAHULU!<br/>");
            }

            // Validasi ME_LP1INCH
            if (ME_LP1INCH === null || ME_LP1INCH === undefined || Object.keys(ME_LP1INCH).length === 0) {
                isLP1INCHValid = false;
                $("#cek").append("CEK, SETTING LP 1NCH!<br/>");
            }

            // Validasi ME_LPODOS
            if (ME_LPODOS === null || ME_LPODOS === undefined || Object.keys(ME_LPODOS).length === 0) {
                isLPODOSValid = false;
                $("#cek").append("CEK, SETTING LP ODOS!<br/>");
            }

            // Validasi ME_SERVERCORS
            if (ME_SERVERCORS === null || ME_SERVERCORS === undefined) {
                isServerCorsValid = false;
                $("#cek").append("CEK,PIIHAN SERVER!<br/>");
            }

            // Validasi ME_DATA_SETTING
            if (ME_DATA_SETTING === null || ME_DATA_SETTING === undefined || !ME_DATA_SETTING.waktuTunggu || !ME_DATA_SETTING.KoinGroup || Object.keys(ME_DATA_SETTING).length === 0) {
                isDataSettingValid = false;
                $("#cek").append("CEK, SETTINGAN SCANNER !<br/>");
            }else{
                coinTrueStatus();
            }

            // Validasi ME_DATA_MODAL
            if (ME_DATA_MODAL === null || ME_DATA_MODAL === undefined || Object.keys(ME_DATA_MODAL).length === 0) {
                isDataSettingModalValid = false;
                $("#cek").append("CEK, SETTINGAN MODAL !<br/>");
            }

            // Check if any validation fails, hide the button
            if (!isDataMasterValid || !isLP1INCHValid || !isLPODOSValid || !isServerCorsValid || !isDataSettingValid) {
                $("button#startSCAN.uk-button.uk-button-primary").hide();
            } else {
                $("button#startSCAN.uk-button.uk-button-primary").show();
            }
            
            if (!($("#D1INCH").prop('checked') || $("#DODOS").prop('checked') || $("#DMATCHA").prop('checked') || $("#DOPEN").prop('checked') )) {
                $("#cek").append("CEK, PILIH DEX<br/>");
                $("button#startSCAN.uk-button.uk-button-primary").hide();
             }           
        }           

        // Function to save checkbox status DEX in local storage
        function saveDEXStatus(checkboxId, status) {
            localStorage.setItem("ME_"+checkboxId, status);
        }

        // Function to get checkbox status from local storage
        function getDEXStatus(checkboxId) {
            return localStorage.getItem("ME_"+checkboxId) === 'true';
        }
        // Function change hitung status coin
        function coinTrueStatus(){
            var countTrueStatus = 0;
                var coinData = ME_savedData.LIST_TOKEN;
                $.each(coinData, function(index, coin) {
                    if (coin.status === true) {
                        countTrueStatus++;
                        var TotalCoins = parseInt(localStorage.setItem('ME_TotalCoins',countTrueStatus));
                    }
                });
            $("#JmlKoin").text(localStorage.getItem('ME_TotalCoins'));    
            $("#pairDex").text(ME_savedData.symbolPair);    
        }

        $('label#JmlKoin').on('click', dowloadJSON);

        function dowloadJSON(){
            // Ambil data JSON dari local storage dengan key BGX_DATA_SETTING
            var gmbData = localStorage.getItem('ME_DATA_SETTING');
            if(gmbData){
                // Parse JSON
                var jsonData = JSON.parse(gmbData);
                // Buat objek baru hanya dengan LIST_TOKEN
                var listToken = { "LIST_TOKEN": jsonData.LIST_TOKEN };
                // Konversi objek menjadi JSON
                var jsonContent = JSON.stringify(listToken, null, 2);
                // Buat elemen <a> untuk download
                var downloadLink = document.createElement('a');
                downloadLink.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(jsonContent);
                downloadLink.download = localStorage.getItem('ME_TotalCoins')+"_"+"TOKEN.json";
                downloadLink.click();
            } else {
                alert('DATA TOKEN KOSONG');
            }
            
        }
       
        // Function to create radio buttons dynamically
        function createRadioButtons() {
                // Add event listener for radio button change
                $('input[name="urlRadio"]').on('change', function () {
                    // Store the selected URL in localStorage
                    var selectedUrl = $('input[name="urlRadio"]:checked').val();
                    localStorage.setItem('ME_SERVERCORS', selectedUrl);
                    location.reload();
                });

                // Check the last selected URL if available in localStorage
                var lastSelectedUrl = localStorage.getItem('ME_SERVERCORS');
                if (lastSelectedUrl) {
                    $('input[name="urlRadio"][value="' + lastSelectedUrl + '"]').prop('checked', true);
                }
        }

        // SET FORM INPUT MODAL
        $('#mKiriKecil1INCH').val(ME_savedDataModal.mKiriKecil1INCH || '');
        $('#mKiriBesar1INCH').val(ME_savedDataModal.mKiriBesar1INCH || '');
        $('#mKananKecil1INCH').val(ME_savedDataModal.mKananKecil1INCH || '');
        $('#mKananBesar1INCH').val(ME_savedDataModal.mKananBesar1INCH || '');

        $('#mKiriKecilODOS').val(ME_savedDataModal.mKiriKecilODOS || '');
        $('#mKiriBesarODOS').val(ME_savedDataModal.mKiriBesarODOS || '');
        $('#mKananKecilODOS').val(ME_savedDataModal.mKananKecilODOS || '');
        $('#mKananBesarODOS').val(ME_savedDataModal.mKananBesarODOS || '');

        $('#mKiriKecilMATCHA').val(ME_savedDataModal.mKiriKecilMATCHA || '');
        $('#mKiriKecilOPEN').val(ME_savedDataModal.mKiriKecilOPEN || '');
        $('#mKananKecilMATCHA').val(ME_savedDataModal.mKananKecilMATCHA || '');
        $('#mKananKecilOPEN').val(ME_savedDataModal.mKananKecilOPEN || '');
      
        $('#mKiriKecilKYBER').val(ME_savedDataModal.mKiriKecilKYBER || '');
        $('#mKananKecilKYBER').val(ME_savedDataModal.mKananKecilKYBER || '');

        // SET INFO MODAL
        $('#in_mKiriKecil1INCH').val(ME_savedDataModal.mKiriKecil1INCH || '');
        $('#in_mKiriBesar1INCH').val(ME_savedDataModal.mKiriBesar1INCH || '');
        $('#in_mKananKecil1INCH').val(ME_savedDataModal.mKananKecil1INCH || '');
        $('#in_mKananBesar1INCH').val(ME_savedDataModal.mKananBesar1INCH || '');

        $('#in_mKiriKecilODOS').val(ME_savedDataModal.mKiriKecilODOS || '');
        $('#in_mKiriBesarODOS').val(ME_savedDataModal.mKiriBesarODOS || '');
        $('#in_mKananKecilODOS').val(ME_savedDataModal.mKananKecilODOS || '');
        $('#in_mKananBesarODOS').val(ME_savedDataModal.mKananBesarODOS || '');

        $('#in_mKiriKecilMATCHA').val(ME_savedDataModal.mKiriKecilMATCHA || '');
        $('#in_mKiriKecilOPEN').val(ME_savedDataModal.mKiriKecilOPEN || '');

        $('#in_mKananKecilMATCHA').val(ME_savedDataModal.mKananKecilMATCHA || '');
        $('#in_mKananKecilOPEN').val(ME_savedDataModal.mKananKecilOPEN || '');

        $('#in_mKiriKecilKYBER').val(ME_savedDataModal.mKiriKecilKYBER || '');
        $('#in_mKananKecilKYBER').val(ME_savedDataModal.mKananKecilKYBER || '');

        // SET SETINGAN APLIKASI
        $('#sc-addresspair').val(ME_savedData.scAddressPair || '');
        $('#des-pair').val(ME_savedData.desPair || '');
        $('#symbol-pair').val(ME_savedData.symbolPair || '');
        $('#waktu-tunggu').val(ME_savedData.waktuTunggu || '');
        $('#inFilterPNL').val(ME_savedData.FilterPNL || '');
        $('#jeda-time-group').val(ME_savedData.jedaTimeGroup || '');                       
        $('#waktu-tunggu').val(ME_savedData.waktuTunggu || '');

        $('#LjedaTimeGroup').text(ME_savedData.jedaTimeGroup || '');                       
        $('#Lwaktu-tunggu').text(ME_savedData.waktuTunggu || '');
        $('#LKoinGroup').text(ME_savedData.KoinGroup || '');

        $('#LFilterPNL').text(ME_savedData.FilterPNL || '');
        $('#LjedaKoin').text(ME_savedData.jedaKoin || '');
        
        $('input[id^="in_mK"]').on('change', function() {
            updateLocalStorage(); // Call the updateLocalStorage function when any matching input changes
        });
        const apiData = JSON.parse(localStorage.getItem('ME_API1INCH'));

        // Pastikan data ada dan merupakan array
        if (Array.isArray(apiData)) {
            apiData.forEach((value, index) => {
            // Mengisi input dengan id api1 sampai api10
            // index + 1 karena array dimulai dari 0, sementara id input dimulai dari 1
            $(`#api${index + 1}`).val(value);
            });
        }   
        // Initial call to updateLocalStorage to populate with existing values
        updateLocalStorage();
    
        function updateLocalStorage() {
            var modalData = {
                mKiriKecil1INCH: $('#in_mKiriKecil1INCH').val() || '',
                mKiriBesar1INCH: $('#in_mKiriBesar1INCH').val() || '',
                mKananKecil1INCH: $('#in_mKananKecil1INCH').val() || '',
                mKananBesar1INCH: $('#in_mKananBesar1INCH').val() || '',
        
                mKiriKecilODOS: $('#in_mKiriKecilODOS').val() || '',
                mKiriBesarODOS: $('#in_mKiriBesarODOS').val() || '',
                mKananKecilODOS: $('#in_mKananKecilODOS').val() || '',
                mKananBesarODOS: $('#in_mKananBesarODOS').val() || '',
        
                mKiriKecilMATCHA: $('#in_mKiriKecilMATCHA').val() || '',
                mKiriKecilOPEN: $('#in_mKiriKecilOPEN').val() || '',
                mKananKecilMATCHA: $('#in_mKananKecilMATCHA').val() || '',
                mKananKecilOPEN: $('#in_mKananKecilOPEN').val() || '',

                mKiriKecilKYBER: $('#in_mKiriKecilKYBER').val() || '',
                mKananKecilKYBER: $('#in_mKananKecilKYBER').val() || ''
            };
             localStorage.setItem('ME_DATA_MODAL', JSON.stringify(modalData));
             
        }

        function setMODAL(){
            var modalData = {
                mKiriKecil1INCH: $('#mKiriKecil1INCH').val() || '',
                mKiriBesar1INCH: $('#mKiriBesar1INCH').val() || '',
                mKananKecil1INCH: $('#mKananKecil1INCH').val() || '',
                mKananBesar1INCH: $('#mKananBesar1INCH').val() || '',

                mKiriKecilODOS: $('#mKiriKecilODOS').val() || '',
                mKiriBesarODOS: $('#mKiriBesarODOS').val() || '',
                mKananKecilODOS: $('#mKananKecilODOS').val() || '',
                mKananBesarODOS: $('#mKananBesarODOS').val() || '',

                mKiriKecilMATCHA: $('#mKiriKecilMATCHA').val() || '',
                mKiriKecilOPEN: $('#mKiriKecilOPEN').val() || '',
                mKananKecilMATCHA: $('#mKananKecilMATCHA').val() || '',
                mKananKecilOPEN: $('#mKananKecilOPEN').val() || '',

                mKiriKecilKYBER: $('#mKiriKecilKYBER').val() || '',
                mKananKecilKYBER: $('#mKananKecilKYBER').val() || ''

            };
            localStorage.setItem('ME_DATA_MODAL', JSON.stringify(modalData));
        }

       // $('#pnl').val(ME_savedData.pnl || '');

       // CEK IP
       function CekIdentitas(){
            var deviceID = generateDeviceID();
            console.log("Device ID:", deviceID);
            if (ME_savedDataID) {
                $("#ip").text("MY IP: " + ME_savedDataID.ip);
            } else {
                $("#ip").text("...");
            }

            function generateDeviceID() {
                // Mendapatkan beberapa informasi yang dapat digunakan untuk membuat Device ID
                var userAgent = navigator.userAgent;
                var screenResolution = window.screen.width + "x" + window.screen.height;
                var timezoneOffset = new Date().getTimezoneOffset();
                var language = navigator.language;

                // Menggabungkan informasi untuk membuat Device ID
                var deviceID = userAgent + screenResolution + timezoneOffset + language;

                // Melakukan hash pada Device ID untuk membuat ID yang lebih pendek
                var hashedDeviceID = hashCode(deviceID);

                return hashedDeviceID;
            }

            function hashCode(str) {
                var hash = 0;
                if (str.length == 0) return hash;
                for (var i = 0; i < str.length; i++) {
                    var char = str.charCodeAt(i);
                    hash = (hash << 5) - hash + char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return hash;
            }

            $.ajax({
                url: "https://api4.my-ip.io/v2/ip.json",
                success: function (response) {
                $("#ip").text("MY IP : " + response.ip);
                localStorage.setItem("ME_IP",response.ip);
                    var simplifiedIdentitas = {
                        id : deviceID,
                        name: response.asn.name,
                        ip: response.ip
                    };

                // Simpan data ke localStorage
                localStorage.setItem('ME_ID', JSON.stringify(simplifiedIdentitas));

                },

                error: function (error) {
                   // $("#ip").text("MY IP : ??? " );
                },
            });
       }

        function saveFormDataSetting() {
            var lapi1inch = [
              $('#api1').val(),
              $('#api2').val(),
              $('#api3').val(),
              $('#api4').val(),
              $('#api5').val(),
              $('#api6').val(),
              $('#api7').val(),
              $('#api8').val(),
              $('#api9').val(),
              $('#api10').val()
            ]
            localStorage.setItem("ME_API1INCH",JSON.stringify(lapi1inch));
            var existingSettingData = JSON.parse(localStorage.getItem('ME_DATA_SETTING')) || {};

            // Update specific arrays in ME_DATA_SETTING
            existingSettingData.LIST_TOKEN = existingSettingData.LIST_TOKEN || [];
            existingSettingData.SERVERCORS = existingSettingData.SERVERCORS || [];

            existingSettingData.jedaTimeGroup = $('#jeda-time-group').val();
            existingSettingData.waktuTunggu = $('#waktu-tunggu').val();
            existingSettingData.KoinGroup = $('input[name="koin-group"]:checked').val();
            existingSettingData.jedaKoin = $('#jeda-koin').val();
            existingSettingData.FilterPNL = $('#inFilterPNL').val();

            existingSettingData.scAddressPair = $('#sc-addresspair').val();
            existingSettingData.desPair = $('#des-pair').val();
            existingSettingData.symbolPair = $('#symbol-pair').val();

            // Explicitly update LIST_TOKEN and SERVERCORS arrays
            existingSettingData.LIST_TOKEN = /* your logic to update LIST_TOKEN */
            existingSettingData.SERVERCORS = /* your logic to update SERVERCORS */

            // Save the updated data to localStorage
            localStorage.setItem('ME_DATA_SETTING', JSON.stringify(existingSettingData));

            setMODAL();
            // Menutup modal setelah menyimpan data
            UIkit.modal("#modal-setting").hide();

            alert("SETTING BERHASIL!!");
            location.reload();
        };

        function feeGasGwei(){
        // FETCH PRICE ETH https://api.binance.me/api/v3/ticker/24hr?symbol=ETHUSDT
            $.getJSON('https://data-api.binance.vision/api/v3/ticker/24hr', { symbol: "ETHUSDT" })
              .done(function(response) {
                localStorage.setItem('ME_PriceETH', response.lastPrice);
              })
              .fail(function(error) {
                console.log('Error calling ETHUSDT:', error);
              });

              $.getJSON('https://api.etherscan.io/api?module=gastracker&action=gasoracle&apikey=YZTQWGJEWWWFYP6CZ9CMJ229SP66T5WSC1')
            .done(function(response) {
                localStorage.setItem('ME_gasGWEI', response.result.suggestBaseFee);
                var gasGWEI=localStorage.getItem('ME_gasGWEI');
                var USDTGasETH=((gasGWEI/1000000000)*260000)*localStorage.getItem('ME_PriceETH');
                localStorage.setItem('ME_USDTGasETH', USDTGasETH);
           })
            .fail(function(error) {
                console.log('Error calling GAS GWEI:', error);
            });
         }

        function importDataJSON(){
            localStorage.removeItem('ME_DATA_MASTER');
            localStorage.removeItem('ME_DATA_SETTING');
            $.ajax({
                url: 'https://multiscan-ruby.vercel.app/ERC/multi_erc.json',
                    success : function(response) {
                    console.warn(response)

                    var serverCORS = response.serverCORS;
                    var token = response.token;
                    var tele_token = response.telegram.token;
                    var id_grup = response.telegram.id_grup;

                    var DataJSON={
                        TOKEN:tele_token,
                        ID_GRUP:id_grup,
                        LIST_TOKEN :token,
                        SERVERCORS :serverCORS,
//                        desPair:18,
                        jedaKoin:10,
                        jedaTimeGroup:0,
//                        scAddressPair:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",
//                        symbolPair:"ETH",
                        waktuTunggu:4,
                        FilterPNL:0,
                        DEX:['1INCH','MATCHA','OPEN','KYBER','ODOS']
                    }

                    localStorage.setItem('ME_DATA_MASTER',JSON.stringify(DataJSON));
                    localStorage.setItem('ME_DATA_SETTING',JSON.stringify(DataJSON));

                     },

                    error: function(error) {
                        alert('SYNC DATA GAGAL');
                    }
                });
            }

        // Event listener for save button click
        $('#save-button').on('click', saveFormDataSetting);
        $('#cek_wallet').on('click', CekWalletBinance);

        // Menampilkan modal settingan
        $("#open-modal").on("click", function() {
            var lastSelctspeed = ME_savedData.KoinGroup;
            if (lastSelctspeed) {
                    $('input[name="koin-group"][value="' + lastSelctspeed + '"]').prop('checked', true);
            }
            UIkit.modal("#modal-setting").show();
        });

        $('#simpanlp1inch').click(function() {
            var checkedCheckboxes = [];
            $("#checkboxLP1INCH input:checked").each(function() {
                checkedCheckboxes.push($(this).val());
            });

            //console.log(checkedCheckboxes)
            localStorage.setItem("ME_LP1INCH",JSON.stringify(checkedCheckboxes))
            alert('SETTING LP 1INCH BERHASIL!!');
            location.reload();
        })
        // MEMBUAT MODAL UNTUK MENAMPILKAN LIST LP 1INCH
        $('span#modalLP1INCH').click(function() {
            const apiData = JSON.parse(localStorage.getItem('ME_API1INCH'));
            var api1inch = apiData[1];

          $('#checkboxLP1INCH').children().remove();
                $.ajax({
                    url: "https://worker-tight-lab-9cc4.fetec22957.workers.dev/?https://api.1inch.dev/swap/v6.0/1/liquidity-sources",
                    type: "GET",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json",
                        'Authorization': "Bearer " +api1inch
                    },
                    success: function(data) {
                        var protocols = data.protocols
                        protocols.forEach((protocol)=>{
                          var listLP = "<label>&nbsp; <input type=checkbox id=protokol_"+protocol.id+" value="+protocol.id+" checked> "+protocol.title+"</label>";
                          $('#checkboxLP1INCH').append(listLP, '&nbsp;&nbsp;');
                        })

                        UIkit.modal('#myModalLP1INCH').show();
                    },
                    error: function(error) {
                        console.error("Error fetching data from the API", error);
                    }
                });
        });

        $('#simpanlpODOS').click(function() {
            var checkedCheckboxes = [];
            $("#checkboxLPODOS input:checked").each(function() {
            checkedCheckboxes.push($(this).val());
            });

            localStorage.setItem("ME_LPODOS",JSON.stringify(checkedCheckboxes));
            alert('SETTING LP ODOS BERHASIL!!');
            location.reload();

        })

        // MEMBUAT MODAL UNTUK MENAMPILKAN LIST LP ODOS
        $('span#modalLPODOS').click(function() {
          $('#checkboxLPODOS').children().remove();

                $.ajax({
                    url: "https://worker-weathered-bar-d4fa.dadiyo8115.workers.dev/?https://api.odos.xyz/info/liquidity-sources/1",
                    type: "GET",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                    success: function(data) {
                        // Display API result in the modal body
                        
                        console.log(data.sources)
                        var protocols = data.sources

                        data.sources.forEach(function(source, index) {
                          $('#checkboxLPODOS').append('<label> <input type="checkbox" id="checkbox' + index + '" value="' + source + '" checked> ' + source + '&nbsp;</label>');
                        });
                        console.log(data.sources)

                        UIkit.modal('#myModalLPODOS').show();

                    },
                    error: function(error) {
                        console.error("Error fetching data from the API", error);
                    }
                });
        });

        $('#syncDATA').on('click', function() {       
             importDataJSON(); 
            // toastr.success('SINKRONISASI BERHASIL!!,<br/> LANJUTKAN KE SETTINGAN');
            alert('SINKRONISASI BERHASIL, LANJUTKAN KE SETTINGAN!!');
             location.reload();
         });

         highlightEmptyInputs();
        // Function to highlight empty inputs with red background
        function highlightEmptyInputs() {
            $('.uk-input').each(function() {
                if ($(this).val().trim() === '') {
                    $(this).toggleClass('uk-form-danger');
                } else {
                    $(this).removeClass('uk-form-danger');
                }
            });
        }
           
        // menjalankan scanning
        $("#startSCAN").on("click", function() {
            var selectedOption = $("input[name='toggle']:checked").val();
            if(selectedOption === "option1"){
                // Lakukan sesuatu jika option 1 dipilih
                tokens.reverse();
                console.log("Option 1 dipilih");
            }
           // tokens.reverse();
            $('tbody tr').remove();
            $('input[type="checkbox"]').prop('disabled', true);
            $('input[type="radio"]').prop('disabled', true);
            $('input[type="number"]').prop('disabled', true);

            var startTime = new Date().getTime();
            localStorage.setItem('ME_startTime',startTime);
            $("#startSCAN").hide();

            $("#LFilterPNL").text("" + ME_savedData.FilterPNL + "$");
            setNullInfo()
            CekIdentitas();

            processTokenData(tokens, groupSize);
        });

        //FUNGSI AUTORUN
        $('input#Cautorun').change(function() {
            if ($(this).is(':checked')) {
                autorun=true;
            } else {
                autorun=false;
            }
        });
        
        // FUNGSI CHECKBOX DISABLE/ENABLE  COIN           
        $(document).on('click', '.statusKoinCheckbox', function() {
            var coinData = ME_savedData.LIST_TOKEN;   
            var symbol = $(this).data('index');
            var status = $(this).prop('checked');
            var namacoin =  symbol;
                    
                coinData.find((token)=>{
                    if(token.symbol == symbol){
                        namacoin = token.symbol
                        token.status=status
                    }
                });

            alert("STATUS KOIN '"+namacoin.replace("USDT", "")+ "' BERUBAH!!");
            // Save the updated data back to localStorage
            coinData = coinData;
            localStorage.setItem('ME_DATA_SETTING', JSON.stringify({...ME_savedData,LIST_TOKEN:coinData}));
            coinTrueStatus();
        });
        // Check the status of checkboxes and show/hide corresponding rows
        function updateTableVisibility() {
            $(".dx_1inch, .dx_odos, .dx_matcha, .dx_open, .dx_kyber").hide();

            if ($('#D1INCH').is(':checked')) {
                $(".dx_1inch").show();
            }

            if ($('#DODOS').is(':checked')) {
                $(".dx_odos").show();
            }

            if ($('#DMATCHA').is(':checked')) {
                $(".dx_matcha").show();
            }

            if ($('#DOPEN').is(':checked')) {
                $(".dx_open").show();
            }

            if ($('#DKYBER').is(':checked')) {
                $(".dx_kyber").show();
            }

        }
        // Initial visibility check
        updateTableVisibility();

        // Attach event listeners to checkbox changes
        $('#D1INCH, #DODOS, #DMATCHA, #DOPEN, #DKYBER').change(function () {
            updateTableVisibility();
        });

        var grupKoin = [];
        var currentGrupKoinTotalRequests = 0;
        var currentGrupKoinRequests = 0;
        var currentProcessingIndex = 0;
        // Function to divide tokens into groups and process them with intervals
        function processTokenData(tokens, groupSize) {
                localStorage.setItem("ME_counter",0);
                var countTrueStatus = localStorage.getItem("ME_TotalCoins");
                var tokensWithTrueStatus = tokens.filter(function(token) {
                    return token.status === true;
                });

                // Menghitung jumlah grup yang dibutuhkan
                var numOfGroups = Math.ceil(tokensWithTrueStatus.length / groupSize);
                //console.log("Jumlah GRoup"+numOfGroups)
                grupKoin = [];
                currentProcessingIndex = 0;
                for (var i = 0; i < numOfGroups; i++) {
                    var startIdx = i * groupSize;
                    var endIdx = (i + 1) * groupSize;
                    var tokenGroup = tokensWithTrueStatus.slice(startIdx, endIdx);

                    var timejeda = i * interval;
                    //digrupkan dulu
                    grupKoin.push(tokenGroup);
                }

                //jalankan grup pertama
                prosesGroup(0);
        }

        function prosesGroup(index){
            //reset jumlah request
            currentGrupKoinRequests = 0;

            //set current index
            currentProcessingIndex = index;

            //grup koin yg saat ini diproses
            let grup = grupKoin[currentProcessingIndex];

            //hitung total request seharusnya untuk grup saat ini
            //dapatkan jmlh dex yg discan
            let jmlhModal = 0;
            if($('#D1INCH').is(':checked')) {
                //$(".dx_1inch").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#lb').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
                if($('#rb').is(':checked')) { jmlhModal++; }
            }
            if($('#DODOS').is(':checked')) { 
                //$(".dx_odos").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#lb').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
                if($('#rb').is(':checked')) { jmlhModal++; }
            }
            if($('#DMATCHA').is(':checked')) { 
                //$(".dx_matcha").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }
            if($('#DOPEN').is(':checked')) { 
               // $(".dx_1inch").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }

            if($('#DKYBER').is(':checked')) { 
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }


            currentGrupKoinTotalRequests = grup.length * jmlhModal;

           console.log("JUMLAH SCAN : " + currentGrupKoinTotalRequests);
            //jalankan proses anggota dari grup koin saat ini
            grup.forEach(function(token,IndexAnggota){
                var symbol=GantiSymbol(token.symbol,"USDT","");
                var counter = parseInt(localStorage.getItem('ME_counter'));
                var jcounter = counter+1;
                localStorage.setItem("ME_counter",jcounter);  
                setTimeout(function () {
                    updateProgress(jcounter, symbol);
                    Scanning(token, IndexAnggota + 1);
                  //  console.log(token.symbol + " anggota ke -",IndexAnggota+1);
                }, ME_savedData.jedaKoin * IndexAnggota);
                console.log(token.symbol +" JEDA PERKOIN: ",ME_savedData.jedaKoin * IndexAnggota + " anggota ke -",IndexAnggota+1 );
            });
        }

        //fungsi ini dipanggil setiap selesai request, baik error atau ndak.
        function selesaiProsesAnggota(){
            //increment currentGrupKoinRequests
            currentGrupKoinRequests++;

            //cek apakah semua anggota sdh diproses
            if(currentGrupKoinRequests == currentGrupKoinTotalRequests){
                //semua anggota sudah diproses. lanjutkan prosesGroup berikutnya
                //tapi cek dulu, apakah grupKoin berikutnya masih ada
                if(currentProcessingIndex < grupKoin.length){
                    setTimeout(function(){
                        prosesGroup(currentProcessingIndex+1);
                    },ME_savedData.jedaTimeGroup);
                }
            }
        }

        function GantiSymbol(simbol,awal,akhir) {
            if (simbol.endsWith(awal)) {
                var pasanganPerdagangan = simbol.replace(awal,akhir);
                return pasanganPerdagangan;
            }
            return simbol;
        }
    
        // fungsi cek price pair
        function cekPricePAIR(){
          var pair = ME_savedData.symbolPair;
          var sc = ME_savedData.scAddressPair;
          var des = ME_savedData.desPair;

                if(ME_savedData.symbolPair=="USDT"){
                    localStorage.setItem('ME_PriceRate', 1);
                    $("#LPriceRate").text("! 1$");
                }else{
                    $.ajax({
                        url:'https://worker-weathered-bar-d4fa.dadiyo8115.workers.dev/?https://api.gateio.ws/api/v4/spot/order_book?limit=4',
                    data: {
                        currency_pair: ME_savedData.symbolPair+"_USDT"
                    },
                    success : function(response) {
                        var PriceRatex = parseFloat(response.asks[0]).toFixed(7);
                        var PriceRate = parseFloat(response.bids[0]).toFixed(7);
                        var PriceRate2 = parseFloat(response.asks[0]).toFixed(7);
                        
                        localStorage.setItem('ME_RatePair',pair+"_USDT");
                        localStorage.setItem('ME_PriceRatex', PriceRatex);
                        localStorage.setItem('ME_PriceRate', PriceRate);
                        localStorage.setItem('ME_PriceRate2', PriceRate2);
                        
                        $("#LPriceRate").text("| " + PriceRate + "$");
                      //  console.log('Get Price Rate Pair:',PriceRate);
                    },

                    error: function(xhr, status, error) {
                    console.log('Error get Price Rate Pair:', error);
                    }
                });
            }
        }

        function checkStatusKoin(coin) {
            // Mendapatkan data dari localStorage
            const walletData = JSON.parse(localStorage.getItem("ME_WALLETETH"));
            
            // Mencari koin yang sesuai dengan parameter coin
            const selectedCoin = walletData.find(function(item) {
                return item.coin === coin;
            });
            // Jika koin ditemukan
            if (selectedCoin) {
                // Tentukan status deposit dan withdraw
                var depositStatus = selectedCoin.depositEnable ? "Aktif" : "Tidak aktif";
                var withdrawStatus = selectedCoin.withdrawEnable ? "Aktif" : "Tidak aktif";
                
                // Tentukan warna dan tulisan untuk deposit dan withdraw
                var dpColor = selectedCoin.depositEnable ? "secondary" : "danger";
                var dpText = selectedCoin.depositEnable ? "[DP]" : "DX";
                var wdColor = selectedCoin.withdrawEnable ? "secondary" : "danger";
                var wdText = selectedCoin.withdrawEnable ? "[WD]" : "WX";

                // Tampilkan label deposit dan withdraw dengan warna yang sesuai
                var dpLabel = '<span class="uk-text-' + dpColor + '">' + dpText + '</span>';
                var wdLabel = '<span class="uk-text-' + wdColor + '">' + wdText + '</span>';
                $("#wallet_"+coin).html(wdLabel + "<span style='color:red; font-weight:bolder;'> " + coin + " </span>" + dpLabel);
              //  console.log(wdLabel + "<span style='color:black;'> " + coin + " </span>" + dpLabel);
               
            } else {
                console.log("Koin " + coin + " tidak ditemukan dalam data.");
            }
        }

        // Fungsi pertama untuk memanggil REST API
        function getPriceBinance(coins,modal,index, callback) {
            const walletData = JSON.parse(localStorage.getItem("ME_WALLETETH"));
            var symbol2=GantiSymbol(coins.symbol,"USDT","");
            // Mencari koin yang sesuai dengan parameter coin
            const selectedCoin = walletData.find(function(item) {
                return item.coin === symbol2;
            });

            if (selectedCoin) {
                var withdrawFee = selectedCoin.feeWDs;
               // console.log("Fee Koin " + symbol2 + " : " + withdrawFee);
            } else {
               // console.log("Koin " + symbol2 + " tidak ditemukan dalam data.");
            }

            $.ajax({
                url: 'https://data-api.binance.vision/api/v3/ticker/bookTicker?symbol=' +coins.symbol+'',
                method: 'GET',
                success: function(data) { 
                   cekPricePAIR();
                   $("#LPriceRate").text(" | . " + localStorage.getItem('ME_PriceRate') + "$");
                    // Callback dengan hasil dari pemanggilan API pertama
                    var dataOUT = {
                         price_buy : data.askPrice,
                         price_sell : data.bidPrice,
                        // feeWD : coins.wd*data.askPrice,
                         feeWD : withdrawFee*data.askPrice,
                         modal : modal,
                         volsell : data.askQty,
                         volbuy : data.bidQty,
                         amount_in_sell : modal/data.askPrice,
                         amount_in_buy : modal / parseFloat(localStorage.getItem('ME_PriceRate')) ,
                         PriceRate : parseFloat(localStorage.getItem('ME_PriceRate')) ,
                         PriceRate2 : parseFloat(localStorage.getItem('ME_PriceRate2')) ,
                    }; 

                   // console.log("xxx",dataOUT.amount_in_buy);
                    callback(null, dataOUT);
                },
                error: function(error) {
                    callback('Error calling API pertama: ' + error);
                    selesaiProsesAnggota();
                }
            });
        }

        function cekHarga1INCH(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,server,wd,ServerCORS,volsell,PriceRate) {
            var listlp1inch =  JSON.parse(localStorage.getItem('ME_LP1INCH')).join(',');
            var Kiri1INCHSinyal = parseInt(localStorage.getItem('ME_Kiri1INCHSinyal'));
            var Kanan1INCHSinyal = parseInt(localStorage.getItem('ME_Kanan1INCHSinyal'));
            var ISERVERCORS = parseInt(localStorage.getItem('ME_SERVERCORS'));
           // cekPricePAIR();
           // var PriceRate = parseFloat(localStorage.getItem('ME_PriceRate'));
            $("#LPriceRate").text("| " + PriceRate + "$");

            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;
           
            const apiData = JSON.parse(localStorage.getItem('ME_API1INCH'));
            var api1inch = apiData[ServerCORS-1];

            //console.warn("POSISI ServerCORS : "+ServerCORS + " *1INCH " + action);
            var amount_in = Math.pow(10, des_input)*amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var gasGWEI = localStorage.getItem('ME_gasGWEI');
            var PriceETH = localStorage.getItem('ME_PriceETH');

            var symbol2=GantiSymbol(symbol,"USDT","");
            var symbol1=GantiSymbol(symbol,"USDT","_USDT");
            
            if(action=="sell"){
                var apiUrl =ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+""+server+"v6.0/1/quote?src="+sc_input+"&dst="+sc_output+"&amount="+amount_in+"&includeGas=true&protocols="+listlp1inch;
            }
            if(action=="buy"){
                var apiUrl ="https://api-defillama.1inch.io/v5.2/1/quote?src="+sc_input+"&dst="+sc_output+"&amount="+amount_in+"&includeGas=true";
            }//console.warn("URL",apiUrl);
            
                $("#dex_"+action+"_"+posisi).html('...');

                $.ajax({
                url: apiUrl,
                method: "GET",
                headers: {
                  "Accept": "application/json",
                  'Content-Type': "application/json; charset=utf-8",
                  'Authorization': "Bearer " +api1inch
                },
                timeout:parseInt(ME_savedData.waktuTunggu)*1000,
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  

                  //  setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    } else {
                       // UNIDEX & 1INCH
                       if(action=="sell"){
                             var amount_out = parseFloat(response.dstAmount)/Math.pow(10, des_output);
                        }
                        // DEFILLAMA
                        if(action=="buy"){
                            var amount_out = parseFloat(response.toAmount)/Math.pow(10, des_output);                        
                        }   
                       
                         var FeeSwap = ((response.gas/ Math.pow(10, 9))*gasGWEI)*PriceETH;
                        
                            if(action=="sell"){
                                var PNL=parseFloat((amount_out*PriceRate)-modal) ;
                               // var priceDEX=(amount_out/(modal/price)).toFixed(8); 
                               var priceDEX =((Number(modal)+PNL)/(modal/price)).toFixed(8); 

                               
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;

                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                console.log("---- 1INCH KIRI : "+ symbol +" ---  ");
                              //  console.log(" API : " + api1inch);
                                console.log(" RATE PAIR : " + parseFloat(localStorage.getItem('ME_PriceRate')));
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" WD : " + wd);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");  

                                $("#cex_buy_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank title='"+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/>  WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2)+" </a>");
                            }

                            if(action=="buy"){
                                
                                var priceDEX=parseFloat(modal/amount_out).toFixed(8); 
                                var PNL =parseFloat(((modal/priceDEX)*price)-modal);

                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                               
                                console.log("---- 1INCH KANAN: "+ symbol +" ---  ");
                              //  console.log(" API : " + api1inch);
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log("-------------------------  ");
                               
                                $("#cex_sell_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank title='"+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.binance.com/en/my/wallet/account/main/deposit/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");

                            }

                            if (ME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('NO FILTER');
                                var filterPNLValue = totalFee+2;                               
                            }else{
                                var filterPNLValue = parseFloat(ME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){   
                                if(action=="sell"){
                                    var jKiri1INCHSinyal = Kiri1INCHSinyal+1;
                                    localStorage.setItem("ME_Kiri1INCHSinyal",jKiri1INCHSinyal)
                                    $("#lKiri1INCHSinyal").text(localStorage.getItem('ME_Kiri1INCHSinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyal1inch").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":1INCH</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKanan1INCHSinyal = Kanan1INCHSinyal+1;
                                    localStorage.setItem("ME_Kanan1INCHSinyal",jKanan1INCHSinyal)
                                    $("#lKanan1INCHSinyal").text(localStorage.getItem('ME_Kanan1INCHSinyal')); 

                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyal1inch").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":1INCH</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+" target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append();
                        }
                   // }, 0);
                },
                
                error: function (xhr, status, error) {    
                    // Jika terjadi error
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="error";
                        var alert = "NO RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="error";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="error";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 403) {
                        var warna="merah";
                        var alert = "API SUSPEND [ "+api1inch+" ]"
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    }  else if (xhr.status === 401) {
                        var warna="merah";
                        var alert = "API MASALAH : [ "+api1inch+" ]"
                    } else if (xhr.status === 400) {
                        var warna="merah";
                        var alert = "Bad Request";
                    } else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    }else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    } else {
                        var warna="merah";
                        var alert=xhr.status;
                    }
                    
                    if (action === "buy") {
                         $("#cex_sell_"+posisi).addClass(warna);
                    } 
                    
                    if (action === "sell") {
                        $("#cex_buy_"+posisi).addClass(warna);
                    }
                    var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+" title='"+alert+"' target=_blank>ERROR</a>").toggleClass(warna);
                    //var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                    currentRow.append();    
                         
                },
                
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }

        function cekHargaODOS(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,wd,ServerCORS,volsell,PriceRate) {
            var listlpodos = JSON.parse(localStorage.getItem("ME_LPODOS"));
            var KiriODOSSinyal = parseInt(localStorage.getItem('ME_KiriODOSSinyal'));
            var KananODOSSinyal = parseInt(localStorage.getItem('ME_KananODOSSinyal'));
            var ISERVERCORS = parseInt(localStorage.getItem('ME_SERVERCORS'));

            //cekPricePAIR();
            //var PriceRate = parseFloat(localStorage.getItem('ME_PriceRate'));
            $("#LPriceRate").text("| " + PriceRate + "$");

            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;

            //console.warn("POSISI ServerCORS : "+ServerCORS + " *ODOS" + action);
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var gasGWEI = localStorage.getItem('ME_gasGWEI');
            var PriceETH = localStorage.getItem('ME_PriceETH');

            var symbol2=GantiSymbol(symbol,"USDT","");
            var symbol1=GantiSymbol(symbol,"USDT","_USDT");

            var apiUrl="https://api.odos.xyz/sor/quote/v2";
            //var apiUrl=ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"https://api.odos.xyz/sor/quote/v2";
        
           //console.warn("KOIN : "+symbol+" NO :"+ServerCORS +" : SERVER ODOS - "+action+" >> "+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]);

                var requestData = {
                    chainId: 1,
                    inputTokens: [
                    {
                        amount: amount_in.toString(),
                        tokenAddress: sc_input,
                    },
                    ],
                    outputTokens: [
                    {
                        proportion: 1,
                        tokenAddress: sc_output,
                    },
                    ],
                    sourceWhitelist: listlpodos,
                    referralCode: 0,
                    slippageLimitPercent: 0.3,
                };
                
                $("#dex_"+action+"_"+posisi).html('...');

                $.ajax({
                url: apiUrl,
                type: "POST",
                dataType: "json",
                timeout:parseInt(ME_savedData.waktuTunggu)*1000,
                contentType: "application/json",
                data: JSON.stringify(requestData),
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                  //  setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    }
                     else {
                            //  console.error(url);
                            var amount_out = response.outValues;
                            var FeeSwap = response.gasEstimateValue;

                            if(action=="sell"){

                                var PNL = Number((amount_out)-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(8); 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                console.log("---- ODOS KIRI : "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log("-------------------------  ");
                               
                                $("#cex_buy_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank title='"+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/>  WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2)+" </a>");

                            }

                            if(action=="buy"){

                                var amount_out = parseFloat(response.outAmounts)/Math.pow(10, des_output);
                                var priceDEX = parseFloat((modal/PriceRate)/(amount_out/PriceRate)).toFixed(8); 
                                var PNL =((modal/priceDEX)*price)-modal;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                console.log("--- ODOS KANAN: "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");

                                $("#cex_sell_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank title='"+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.binance.com/en/my/wallet/account/main/deposit/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");

                            }

                            if (ME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('NO FILTER');
                                var filterPNLValue = totalFee+2;                               
                            }else{
                                var filterPNLValue = parseFloat(ME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){  

                                if(action=="sell"){
                                    var jKiriODOSSinyal = KiriODOSSinyal+1;
                                    localStorage.setItem("ME_KiriODOSSinyal",jKiriODOSSinyal)
                                    $("#lKiriODOSSinyal").text(localStorage.getItem('ME_KiriODOSSinyal')); 
                                    
                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyalodos").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":ODOS</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.odos.xyz/' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }
                                if(action=="buy"){
                                    var jKananODOSSinyal = KananODOSSinyal+1;
                                    localStorage.setItem("ME_KananODOSSinyal",jKananODOSSinyal)
                                    $("#lKananODOSSinyal").text(localStorage.getItem('ME_KananODOSSinyal')); 
                                    
                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyalodos").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":ODOS</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://app.odos.xyz/' target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +                                
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://app.odos.xyz target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append();
                        }
                  //  }, 0);
                },
                error: function (xhr, status, error) {
                    var warna="error";
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = "DI SKIP";
                    }else if (xhr.status == 400) {
                        var errorResponse = JSON.parse(xhr.responseText);
                        var alert = errorResponse.detail;    
                    }else if (xhr.status == 429) {
                        var alert = "LIMITED";
                    }else if (xhr.status == 200) {
                        var warna="biru";
                        var alert = "NO RESPONSE";
                    }else if (xhr.status == 0) {
                        var warna="merah";
                        var alert = "SERVER [ "+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+" ]";
                    }else {
                        var alert=xhr.status;
                    }
                    var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }

        function cekHargaMATCHA(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,key,wd,volsell,PriceRate) {
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var KiriMATCHASinyal = parseInt(localStorage.getItem('ME_KiriMATCHASinyal'));
            var KananMATCHASinyal = parseInt(localStorage.getItem('ME_KananMATCHASinyal'));

            var gasGWEI = localStorage.getItem('ME_gasGWEI');
            var PriceETH = localStorage.getItem('ME_PriceETH');

           // cekPricePAIR();
           // var PriceRate = parseFloat(localStorage.getItem('ME_PriceRate'));
            $("#LPriceRate").text("| " + PriceRate + "$");

            var symbol2=GantiSymbol(symbol,"USDT","");
            var symbol1=GantiSymbol(symbol,"USDT","_USDT");

            var apiUrl = "https://api.0x.org/swap/v1/quote?buyToken="+sc_output+"&sellToken="+sc_input+"&sellAmount="+amount_in;

            $("#dex_"+action+"_"+posisi).html('...');
                $.ajax({
                    url: apiUrl, 
                    method: 'GET', 
                    headers: {
                    '0x-api-key': key,
                    },
                    timeout:parseInt(ME_savedData.waktuTunggu)*1000,                
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                   // setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    } else {
                            var amount_out = response.buyAmount/Math.pow(10, des_output);
                            var FeeSwap = ((response.estimatedGas/ Math.pow(10, 9))*gasGWEI)*PriceETH;

                            if(action=="sell"){

                                var PNL=Number((amount_out*PriceRate)-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(8); ; 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                console.log("--- MATCHA KIRI : "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" PNL : " + PNL);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log("-------------------------  ");

                                $("#cex_buy_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/>  WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2)+" </a>");
                            
                            }

                            if(action=="buy"){
                            
                                var amount_out = parseFloat(response.buyAmount)/Math.pow(10, des_output);
                                var priceDEX = parseFloat((modal/PriceRate)/(amount_out/PriceRate)).toFixed(8); 
                                var PNL =((modal/priceDEX)*price)-modal;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                console.log("--- MATCHA KANAN: "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");

                                $("#cex_sell_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.binance.com/en/my/wallet/account/main/deposit/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");

                            }

                            if (ME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('NO FILTER');
                                var filterPNLValue = totalFee+2;                               
                            }else{
                                var filterPNLValue = parseFloat(ME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){ 

                                if(action=="sell"){
                                    var jKiriMATCHASinyal = KiriMATCHASinyal+1;
                                    localStorage.setItem("ME_KiriMATCHASinyal",jKiriMATCHASinyal)
                                    $("#lKiriMATCHASinyal").text(localStorage.getItem('ME_KiriMATCHASinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyalmatcha").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":MATCHA</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://matcha.xyz/tokens/ethereum/" + sc_input +"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKananMATCHASinyal = KananMATCHASinyal+1;
                                    localStorage.setItem("ME_KananMATCHASinyal",jKananMATCHASinyal)
                                    $("#lKananMATCHASinyal").text(localStorage.getItem('ME_KananMATCHASinyal')); 

                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyalmatcha").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":MATCHA</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://matcha.xyz/tokens/ethereum/" + sc_output+" target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }
                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://matcha.xyz/tokens/ethereum/"+sc_input +" target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append(); 
                         }
                  //  }, 0);             
                },
                error: function (xhr, status, error) {
                    var warna ="error";
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr .status == 400) {
                        var errorResponse = JSON.parse(xhr.responseText);
                        //var alert = "NO LP";  
                        var alert = errorResponse;                     
                    }else if (xhr.status == 429) {
                        var alert = "LIMITED";
                    }else if (xhr.status == 200) {
                        var warna="biru";
                        var alert = " NO RESPONSE";
                    }else if (xhr.status == 0) {
                            var alert = " CORS";
                    }else {
                        var alert=xhr.status;
                    }
                    var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }
 
        function cekHargaKYBER(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,key,wd,volsell,PriceRate) {var amount_in =amount;
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var KiriKYBERSinyal = parseInt(localStorage.getItem('ME_KiriKYBERSinyal'));
            var KananKYBERSinyal = parseInt(localStorage.getItem('ME_KananKYBERSinyal'));

            var gasGWEI = localStorage.getItem('ME_gasGWEI');
            var PriceETH = localStorage.getItem('ME_PriceETH');

            $("#LPriceRate").text(" " + PriceRate + "$");

            var symbol2=GantiSymbol(symbol,"USDT","");
            var symbol=GantiSymbol(symbol,"USDT","USDT");

            var apiUrl="https://aggregator-api.kyberswap.com/ethereum/route/encode?tokenIn=" + sc_input + "&tokenOut=" + sc_output + "&amountIn="+amount_in+"&to=0x365d358dc96ae70C35a1e338A9A7645313D1231B&saveGas=0&gasInclude=1&slippageTolerance=1&clientData={%22source%22:%22DefiLlama%22}";
                $.ajax({
                    url: apiUrl, 
                    method: 'GET', 
                    timeout:parseInt(ME_savedData.waktuTunggu)*1000,                
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                    setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    } else {
                            var amount_out=response.outputAmount/Math.pow(10, des_output);
                            var FeeSwap = ((response.totalGas/ Math.pow(10, 9))*gasGWEI)*PriceETH;
                            
                            if(action=="sell"){
                                var PNL=Number((amount_out*PriceRate)-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(8); ; 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                $("#cex_buy_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol+"?type=spot target=_blank><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2)+" </a>");

                                console.log("--- KYBER KIRI : "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log("-------------------------  ");

                            }

                            if(action=="buy"){ 
                                var priceDEX = parseFloat((modal/PriceRate)/(amount_out/PriceRate)).toFixed(8); 
                                var PNL =(amount_out*price)-modal;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                $("#cex_sell_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol+"?type=spot target=_blank><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");


                                console.log("--- KYBER KANAN: "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");
                            }

                            if (ME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('NO FILTER');
                                var filterPNLValue = totalFee+2;                               
                            }else{
                                var filterPNLValue = parseFloat(ME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){ 

                                if(action=="sell"){
                                    var jKiriKYBERSinyal = KiriKYBERSinyal+1;
                                    localStorage.setItem("ME_KiriKYBERSinyal",jKiriKYBERSinyal)
                                    $("#lKiriKYBERSinyal").text(localStorage.getItem('ME_KiriKYBERSinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyalkyber").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":KYBER</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://kyberswap.com/swap/ethereum/" + symbol2 +"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKananKYBERSinyal = KananKYBERSinyal+1;
                                    localStorage.setItem("ME_KananKYBERSinyal",jKananKYBERSinyal)
                                    $("#lKananKYBERSinyal").text(localStorage.getItem('ME_KananKYBERSinyal')); 

                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyalkyber").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');


                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":KYBER</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://kyberswap.com/swap/ethereum/" + symbol2 +"/USDT target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://kyberswap.com/swap/ethereum/" + symbol2 +"-to-eth target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append(); 
                        }
                    }, 0);             
                },
                error: function (xhr, status, error) {
                    var warna ="error";
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr .status == 400) {
                        var errorResponse = JSON.parse(xhr.responseText);
                        var alert = errorResponse;                     
                    }else if (xhr.status == 429) {
                        var alert = "LIMITED";
                    }else if (xhr.status == 200) {
                        var warna="biru";
                        var alert = " NO RESPONSE";
                    }else if (xhr.status == 0) {
                        var alert = "KENA LIMIT";                    
                    } else {
                        var alert=xhr.status;
                    }
                    var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }

        function cekHargaSWOOP(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,wd,cex,PriceRate) {
            
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var gasGWEI = localStorage.getItem('ME_gasGWEI');
            var PriceETH = localStorage.getItem('ME_PriceETH');
            var USDTGasETH = localStorage.getItem('ME_USDTGasETH');
            
            var symbol2=GantiSymbol(symbol,"_USDT","");
            var symbol1=GantiSymbol(symbol,"_USDT","");

            var payload = {
                "chainId": 1,
                "aggregatorSlug": cex,
              //  "amountInWei":1*Math.pow(10, 21),
                "sender": "0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045",
                "inToken": {
                    "chainId": 1,
                    "type": "TOKEN",
                    "address": sc_input,
                    "decimals": parseFloat(des_input)
                },
                "outToken": {
                    "chainId": 1,
                    "type": "TOKEN",
                    "address": sc_output,
                    "decimals": parseFloat(des_output)
                },
                "amountInWei":String(amount_in),
                "slippageBps": "100",
             //   "gasPriceGwei": Number(gasGWEI),
            };

            $.ajax({
                url: 'https://swoop-backend.up.railway.app/swap',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(payload),
                timeout:parseInt(ME_savedData.waktuTunggu)*1000,
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                    setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    }
                     else {
                        //  console.error(url);
                        var amount_out = parseFloat(response.amountOutWei)/Math.pow(10, des_output);
                       // var FeeSwap = ((response.feeWei/ Math.pow(10, 21))*gasGWEI)*PriceETH;
                      //  var FeeSwap = (parseFloat(response.feeWei)/ Math.pow(10, 6));

                            if(action=="sell"){
                                var FeeSwap = ((response.feeWei/ Math.pow(10, 21))*gasGWEI)*PriceETH;
                                var PNL=parseFloat((amount_out*PriceRate)-modal) ;
                                var priceDEX =((Number(modal)+PNL)/(modal/price)).toFixed(8); 
                               // var priceDEX=(amount_out/(modal/price)).toFixed(9); 
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                $("#cex_buy_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank ><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2)+" </a>");

                                console.log("---- "+cex+" KIRI : "+ symbol +" ---  ");
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" WD : " + wd);
                                console.log(" FEE SWAP : " + response.feeWei);
                                console.log(" FEE SWAP 2 : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");  
                            }

                            if(action=="buy"){         
                                var FeeSwap = ((response.feeWei/ Math.pow(10, des_output))*gasGWEI)*price;
                                var priceDEX=parseFloat(modal/amount_out).toFixed(8); 
                                var PNL =parseFloat(((modal/priceDEX)*price)-modal);

                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                               
                                $("#cex_sell_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank ><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.binance.com/en/my/wallet/account/main/deposit/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");

                                console.log("---- "+cex+" KANAN: "+ symbol +" ---  ");
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" FEE SWAP : " + response.feeWei);
                                console.log(" FEE SWAP 2 : " + FeeSwap);
                                console.log("-------------------------  ");
                                
                            }

                            if (ME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('NO FILTER');
                                var filterPNLValue = totalFee+1;                               
                            }else{
                                var filterPNLValue = parseFloat(ME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){   
                                if(action=="sell"){
                                     var jKiri1INCHSinyal = Kiri1INCHSinyal+1;
                                     localStorage.setItem("ME_Kiri1INCHSinyal",jKiri1INCHSinyal)
                                     $("#lKiri1INCHSinyal").text(localStorage.getItem('ME_Kiri1INCHSinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyal"+cex).append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":1INCH</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://arbiscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://arbiscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.binance.com/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.1inch.io/#/42161/advanced/swap/"+sc_input+"/"+sc_output+"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                   // MultisendMessage(message);
                                }

                                if(action=="buy"){
                                     var jKanan1INCHSinyal = Kanan1INCHSinyal+1;
                                     localStorage.setItem("ME_Kanan1INCHSinyal",jKanan1INCHSinyal)
                                     $("#lKanan1INCHSinyal").text(localStorage.getItem('ME_Kanan1INCHSinyal')); 

                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyal"+cex+"").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":1INCH</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://arbiscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://arbiscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://app.1inch.io/#/42161/advanced/swap/"+sc_input+"/"+sc_output+"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.binance.com/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                   // MultisendMessage(message);
                                }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>"+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.swoop.exchange/ target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append();
                        }
                    }, 0);
                },
                error: function (xhr, status, error) {
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="limit";
                        var alert = "NOL RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="limit";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="limit";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 403) {
                        var warna="merah";
                        var alert = "API SUSPEND [ "+api1inch+" ]"
                    }else if (xhr.status === 401) {
                        var warna="merah";
                        var alert = "CEK API [ "+api1inch+" ]"
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    } else if (xhr.status === 400) {
                        var warna="merah";                        
                        var errorResponse = JSON.parse(xhr.responseText);
                            if (errorResponse && errorResponse.description=="insufficient liquidity") {
                                var alert = "NO LP";
                            }else {
                                var alert = "KONEKSI BURUK";
                            } 
                    }
                     else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    }else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    } else {
                        var warna="merah";
                        var alert=xhr.status;
                    }

                        if (action === "buy") {
                         $("#cex_sell_"+posisi).addClass(warna);
                        } 
                        
                        if (action === "sell") {
                            $("#cex_buy_"+posisi).addClass(warna);
                        }
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/42161/advanced/swap/"+sc_input+"/"+sc_output+" title='"+alert+"' target=_blank>ERROR</a>").toggleClass(warna);

//                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                        currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
     
        }
      
        function cekHargaOPEN(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,wd,ServerCORS,volsell,PriceRate) {var amount_in =amount;
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var KiriOPENSinyal = parseInt(localStorage.getItem('ME_KiriOPENSinyal'));
            var KananOPENSinyal = parseInt(localStorage.getItem('ME_KananOPENSinyal'));

            var ISERVERCORS = parseInt(localStorage.getItem('ME_SERVERCORS'));
            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;

            var gasGWEI = localStorage.getItem('ME_gasGWEI');
            var PriceETH = localStorage.getItem('ME_PriceETH');

            $("#LPriceRate").text("| " + PriceRate + "$");

            var symbol2=GantiSymbol(symbol,"USDT","");
            var symbol1=GantiSymbol(symbol,"USDT","_USDT");

            var apiUrl =ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"https://apiv5.paraswap.io/prices/?"+ "srcToken="+sc_input+"&srcDecimals="+des_input+"&destToken="+sc_output+"&destDecimals="+des_output+"&side=SELL&network=1"+"&amount=" +amount_in;
           
           // var apiUrl ="https://open-api.openocean.finance/v3/eth/quote?inTokenAddress=" + sc_input + "&outTokenAddress=" + sc_output + "&gasPrice="+4+"&slippage=0.3&amount=" + amount_in;

            $("#dex_"+action+"_"+posisi).html("<label class='uk-text-primary'>load...</label>"); 

                $.ajax({
                    url: apiUrl, 
                    method: 'GET', 
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html("<label class='uk-text-primary'>LOAD...</label>");
                },
                timeout: parseInt(ME_savedData.waktuTunggu)*1000,
                success: function(response, textStatus, xhr) {  
                            var amount_out = response.priceRoute.destAmount/Math.pow(10, des_output);
                            //var FeeSwap = response.priceRoute.gasCostUSD;
                            var FeeSwap = ((response.priceRoute.gasCost/ Math.pow(10, 9))*gasGWEI)*PriceETH;

                            if(action=="sell"){
                                $("#cex_buy_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.binance.com/en/my/wallet/account/main/withdrawal/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary> ["+ (FeeSwap).toFixed(2) +"#WD] </label> </a>");
                            
                                var PNL=Number((amount_out*PriceRate)-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(8); ; 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                console.log("--- KIRI PARA : "+ symbol +" ---  ");
                                console.log(" SERVER CORS : " + ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]);
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log("-------------------------  ");

                            }

                            if(action=="buy"){
                                $("#cex_sell_"+posisi).html("<a href=https://www.binance.com/en/trade/"+symbol1+"?type=spot target=_blank><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.binance.com/en/my/wallet/account/main/deposit/crypto/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>*"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");
                        
                                var priceDEX = parseFloat((modal/PriceRate)/(amount_out/PriceRate)).toFixed(8); 

                                var PNL =(amount_out*price)-modal;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                console.log("--- KANAN PARA: "+ symbol +" ---  ");
                                console.log(" SERVER CORS : " + ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]);
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + ME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");
                            }

                            if (ME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('NO FILTER');
                                var filterPNLValue = totalFee+2;                               
                            }else{
                                var filterPNLValue = parseFloat(ME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){ 

                                if(action=="sell"){
                                    var jKiriOPENSinyal = KiriOPENSinyal+1;
                                    localStorage.setItem("ME_KiriOPENSinyal",jKiriOPENSinyal)
                                    $("#lKiriOPENSinyal").text(localStorage.getItem('ME_KiriOPENSinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyalopen").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":OPEN</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.openocean.finance/CLASSIC#/ETH/USDT/" + symbol2 +"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKananOPENSinyal = KananOPENSinyal+1;
                                    localStorage.setItem("ME_KananOPENSinyal",jKananOPENSinyal)
                                    $("#lKananOPENSinyal").text(localStorage.getItem('ME_KananOPENSinyal')); 

                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyalopen").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');


                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('ME_idserver')+ ":OPEN</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://app.openocean.finance/CLASSIC#/ETH/" + symbol2 +"/USDT target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.binance.me/en/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }
                                var warna="ijo";
                                var PNL=""+PNL.toFixed(2)+"#<span class='uk-label uk-label-secondary'>"+(PNL-totalFee).toFixed(2)+"</span>";

                            }else{
                                var warna="";
                                var PNL=""+PNL.toFixed(2)+"#<span class='uk-text-secondary'>"+(PNL-totalFee).toFixed(2)+"</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://app.openocean.finance/CLASSIC#/ETH/USDT/" + symbol2 +" target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append(); 
                
                },
                error: function (xhr, status, error) {
                    var warna ="error";
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr .status == 400) {
                        var errorResponse = JSON.parse(xhr.responseText);
                        var alert = errorResponse;                     
                    }else if (xhr.status == 429) {
                        var alert = "LIMITED";
                    }else if (xhr.status == 403) {
                        var alert = "403: "+ME_savedData.SERVERCORS[ISERVERCORS][ServerCORS];
                    }else if (xhr.status == 200) {
                        var warna="biru";
                        if (errorResponse && errorResponse.code=="quote error") {
                                var alert = "NO QOUTE";
                            }else{
                                var alert = " NO RESPONSE";
                        }
                        
                    }else if (xhr.status == 0) {
                            var alert = " CORS";
                    }else {
                        var alert=xhr.status;
                    }
                    var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                timeout: function() {
                    // Jika melebihi batas waktu, tampilkan pesan "lewati..."
                    $("#dex_"+action+"_"+posisi).html("<label class='uk-text-danger'>TIME OVER</label>");
                }
                });
            }

        function Scanning(coins,index){

                feeGasGwei();
                
                var statusChecked = coins.status ? 'checked' : '';      
                            var symbol1=GantiSymbol(coins.symbol,"USDT","_USDT");
                            var symbol2=GantiSymbol(coins.symbol,"USDT","");

                             var linkStok= ' [ <a href="https://etherscan.io/token/'+coins.sc+'?a=0xDFd5293D8e347dFe59E90eFd55b2956a1343963d" target="_blank"> 1 </a> | <a href="https://etherscan.io/token/'+coins.sc+'?a=0xe2fc31F816A9b94326492132018C3aEcC4a93aE1" target="_blank"> 2 </a> ]';
                                    //cek harga modal kecil dari kiri
                                    if ($('#ls').is(':checked')) {
                                        if ($('#D1INCH').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKiriKecil1INCH,index+1, function(error, result) {
                                                cekHarga1INCH(result.modal,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_1inch_"+symbol2+"","https://api.1inch.dev/swap",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {
                                                    console.warn(symbol2 + "DONE KIRI KECIL 1INCH!");
                                                });
                                            });
                                           
                                        }   
                                        if ($('#DODOS').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKiriKecilODOS,index+1, function(error, result) {
                                                cekHargaODOS(result.modal ,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_odos_"+symbol2+"",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {
                                              //  cekHargaSWOOP(result.modal ,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_odos_"+symbol2+"",result.feeWD,"odos",result.PriceRate,function(error, response) {                                               
  
                                              console.warn(symbol2 + "DONE KIRI KECIL ODOS!");
                                                });
                                            });
                                        }   
                                        if ($('#DMATCHA').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKiriKecilMATCHA,index+1, function(error, result) {
                                                cekHargaMATCHA(result.modal ,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_matcha_"+symbol2+"","6f5d5c4d-bfdd-4fc7-8d3f-d3137094feb5",result.feeWD,result.volsell,result.PriceRate,function(error, response) {
                                                    console.warn(symbol2 + "DONE KIRI KECIL MATCHA!");
                                                });
                                            });
                                        } 
                                        if ($('#DKYBER').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKiriKecilKYBER,index+1, function(error, result) {
                                                if (!error) {
                                                    if (result !== null) {
                                                        cekHargaKYBER(result.modal ,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_kyber_"+symbol2+"","",result.feeWD,result.volsell,result.PriceRate,"kyberswap",function(error, response) {
                                                        console.warn(symbol2 + "DONE KIRI KECIL KYBER!");
                                                    });
                                                  }                                                     
                                                }    
                                            });
                                        }
                                        if ($('#DOPEN').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKiriKecilOPEN,index+1, function(error, result) {
                                               /* 
                                               cekHargaOPEN(result.modal ,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_open_"+symbol2+"",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {
                                                    console.warn(symbol2 + "DONE KIRI KECIL OPEN!");
                                                });
                                                */
                                                cekHargaSWOOP(result.modal ,coins.sc, coins.desimal, ME_savedData.scAddressPair, ME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_open_"+symbol2+"",result.feeWD,"paraswap",result.PriceRate,function(error, response) {                                               
                                                });
                                            });
                                        }  
                                    }
                            
                                    //cek harga modal kecil dari kanan
                                    if ($('#rs').is(':checked')) {
                                        if ($('#D1INCH').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKananKecil1INCH,index+1, function(error, result) {
                                                if (!error) {
                                                    cekHarga1INCH(result.modal, ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_1inch_bin_"+symbol2+"","https://api.1inch.dev/swap",result.feeWD,index,0,result.PriceRate2,function(error, response) {
                                                    });
                                                } else {
                                                    console.error(error);
                                                }
                                            });
                                        }   
                                        if ($('#DODOS').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKananKecilODOS,index+1, function(error, result) {
                                                if (!error) {
                                                    cekHargaSWOOP(result.modal , ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_odos_bin_"+symbol2+"",result.feeWD,"odos",result.PriceRate,function(error, response){
                                                  //  cekHargaODOS(result.modal , ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_odos_bin_"+symbol2+"",result.feeWD,index,0,result.PriceRate2,function(error, response) {
                                                    });
                                                } else {
                                                    console.error(error);
                                                }
                                            });
                                        }   
                                        if ($('#DMATCHA').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKananKecilMATCHA,index+1, function(error, result) {
                                                cekHargaMATCHA(result.modal , ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_matcha_bin_"+symbol2+"","6f5d5c4d-bfdd-4fc7-8d3f-d3137094feb5",result.feeWD,0,result.PriceRate2,function(error, response) {
                                                    });
                                            });
                                        }  

                                        if ($('#DKYBER').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKananKecilKYBER,index+1, function(error, result) {
                                                cekHargaKYBER(result.modal , ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_kyber_bin_"+symbol2+"","",result.feeWD,0,result.PriceRate2,"kyberswap",function(error, response) {
                                                    });
                                            });
                                        }
                                        if ($('#DOPEN').is(':checked')) {
                                            getPriceBinance(coins,ME_savedDataModal.mKananKecilOPEN,index+1, function(error, result) {
                                                if (!error) {
                                                   /*
                                                    cekHargaOPEN(result.modal , ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_open_bin_"+symbol2+"",result.feeWD,index,0,result.PriceRate2,function(error, response) {
                                                   });
                                                   */
                                                   cekHargaSWOOP(result.modal , ME_savedData.scAddressPair, ME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_open_bin_"+symbol2+"",result.feeWD,"paraswap",result.PriceRate,function(error, response){
                                                    });
                                                } else {
                                                    console.error(error);
                                                }
                                            });
                                        } 
                                    }
                            

                                    var linkDefillama="<span style=color:orange;><a href=https://swap.defillama.com/?chain=ethereum&from="+coins.sc+"&to="+ME_savedData.scAddressPair+" target=_blank> DEFIL </a></span>";
                                    var linkUNIDEX ="<span style=color:orange;><a href=https://app.unidex.exchange/?chain=ethereum&from="+coins.sc+"&to="+ME_savedData.scAddressPair+" target=_blank> UNIDEX </a></span>";

                                    $("#TabelBINANCE").append(
                                        "<tr>" +
                                            "<td  class=dx_1inch id=cex_buy_mk_bin_1inch_"+symbol2+"></td>" +
                                            "<td  class=dx_odos id=cex_buy_mk_bin_odos_"+symbol2+"></td>" +
                                            "<td  class=dx_matcha id=cex_buy_mk_bin_matcha_"+symbol2+"></td>" +
                                            "<td  class=dx_kyber id=cex_buy_mk_bin_kyber_"+symbol2+"></td>" +                                          
                                            "<td  class=dx_open id=cex_buy_mk_bin_open_"+symbol2+"></td>" +
                                            "<td  rowspan=2 style=background-color:#91b2ec;> <span id=wallet_"+symbol2+">"+symbol2+"</span> </br>  <input type=checkbox class=statusKoinCheckbox data-index="+ coins.symbol +"  " + statusChecked + ">"+linkStok+" <a href=https://etherscan.io/token/"+coins.sc+" target=_blank>[SC] </a> <br/> "+linkDefillama+" | "+linkUNIDEX+"</td>" +                    
                                            // "<td  rowspan=2 style=background-color:cornflowerblue;> <a href=https://etherscan.io/token/"+coins.sc+" target=_blank>" + symbol2 + "</a> <br/><input type=checkbox class=statusKoinCheckbox data-index="+ coins.symbol +"  " + statusChecked + ">"+linkStok+"</td>" +                    
                                            "<td  class=dx_1inch id=dex_buy_mk_1inch_bin_"+symbol2+"></td>" +    
                                            "<td  class=dx_odos id=dex_buy_mk_odos_bin_"+symbol2+"></td>" +    
                                            "<td  class=dx_matcha id=dex_buy_mk_matcha_bin_"+symbol2+"></td>" +   
                                            "<td  class=dx_kyber id=dex_buy_mk_kyber_bin_"+symbol2+"></td>" + 
                                            "<td  class=dx_open id=dex_buy_mk_open_bin_"+symbol2+"></td>" +   
                                                                                                                    
                                        "</tr>"+
                                        "<tr>" +
                                            "<td  class=dx_1inch id=dex_sell_mk_bin_1inch_"+symbol2+"></td>" +
                                            "<td  class=dx_odos id=dex_sell_mk_bin_odos_"+symbol2+"></td>" +
                                            "<td  class=dx_matcha id=dex_sell_mk_bin_matcha_"+symbol2+"></td>" +
                                            "<td  class=dx_kyber id=dex_sell_mk_bin_kyber_"+symbol2+"></td>" +
                                            "<td  class=dx_open id=dex_sell_mk_bin_open_"+symbol2+"></td>" +
                                           // "<td>xxxxxx</td>" +                    
                                            "<td  class=dx_1inch id=cex_sell_mk_1inch_bin_"+symbol2+"></td>" +    
                                            "<td  class=dx_odos id=cex_sell_mk_odos_bin_"+symbol2+"></td>" +    
                                            "<td  class=dx_matcha id=cex_sell_mk_matcha_bin_"+symbol2+"></td>" + 
                                            "<td  class=dx_kyber id=cex_sell_mk_kyber_bin_"+symbol2+"></td>" +   
                                            "<td  class=dx_open id=cex_sell_mk_open_bin_"+symbol2+"></td>" +                                                                    
                                        "</tr>"
                                    );            
                                    updateTableVisibility();
                                    checkStatusKoin(symbol2);
    
        }

        function updateProgress(totalscanned,token){            
            var countTrueStatus = localStorage.getItem("ME_TotalCoins");

            var mulai = parseInt(localStorage.getItem('ME_startTime'));
            var endTime = new Date().getTime(); // Waktu akhir setelah panggilan REST API berhasil

            var duration = (endTime - mulai)/1000; // Durasi panggilan API dalam milidetik
            localStorage.setItem("ME_duration",duration);


            var perulangan = totalscanned / countTrueStatus;
            $('#scanprogress').html('CHECK - '+token+' [ '+ totalscanned + ' / ' + countTrueStatus + ' coin] :: DURASI ['+parseFloat(duration/60).toFixed(2)+' Menit]').css("color", "blue");
            $('#bar').css('width', (totalscanned / countTrueStatus * 100) + '%');

            if(totalscanned >= countTrueStatus ){
                
                if(autorun == true){
                    $('#scanprogress').html('Mengulangi scanning dalam 7 detik.');
                    
                    setTimeout(function(){ 
                        $('tbody tr').remove();
                        var startTime = new Date().getTime();
                        localStorage.setItem('ME_startTime',startTime);
                        
                        setNullInfo()
                        processTokenData(tokens, groupSize);
                    }, 7000);
                }else{
                    $('#scanprogress').html('SCANNING SELESAI!! DURASI ['+parseFloat(duration/60).toFixed(2)+' Menit]');
                    $("button#startSCAN.uk-button.uk-button-primary").show();
                }
            }
        }

        $("#refresh").click(function () {
            location.reload();
            //toastr.success('REFRESH DONE!!');
            alert("REFRESH AKAN DILAKUKAN...!!");
            $("button#startSCAN.uk-button.uk-button-primary").hide();
        });

        function MultisendMessage(message) {
                var users = [
                    { chat_id: 5606074884 }                
                   // { chat_id: ME_savedData.ID_GRUP}
                ];

                var token = ME_savedData.TOKEN;
                var apiUrl = 'https://api.telegram.org/bot' + token + '/sendMessage';

                // Loop melalui daftar pengguna
                for (var i = 0; i < users.length; i++) {
                var user = users[i];
                var chatId = user.chat_id; // Ganti dengan ID chat pengguna

                // Membuat permintaan POST menggunakan jQuery
                $.ajax({
                    url: apiUrl,
                    method: "POST",
                    data: {
                        chat_id: chatId,
                        text: message,
                        parse_mode: "HTML",
                        disable_wME_page_preview: true
                    },
                    success: function(response) {
                        console.log("Message sent successfully");
                    },
                    error: function(xhr, status, error) {
                        console.log("Error sending message:", error);
                    }
                    });
                }
            }

            function calculateSignature(query_string) {
            const secretKey = "XHjPVjLzbs741xoznV3xz1Wj5SFrcechNBjvezyXLcg8GLWF21VW32f0YhAsQ9pn";
            const signature = CryptoJS.HmacSHA256(query_string, secretKey).toString(CryptoJS.enc.Hex);
            return signature;
        }

        function CekWalletBinance(){
            const apiKey = '2U7YGMEUDri6tP3YEzmK3CcZWb9yQ5j3COp9s7pRRUv4vu8hJAlwH4NkbNK74hDU';
            const timestamp = Date.now().toString();
            const queryString = `timestamp=${timestamp}`;
            const signature = calculateSignature(queryString);

            const apiUrl = "https://yazid4.yazidcrypto3.workers.dev/?https://api.binance.com/sapi/v1/capital/config/getall";

            $.ajax({
                url: `${apiUrl}?timestamp=${timestamp}&signature=${signature}`,
                method: "GET",
                headers: {
                    "X-MBX-APIKEY": apiKey,
                },
                success: function(data) {
                    toastr.success('UPDATE WALLET BINANCE BERHASIL!!');
                    // Filter data untuk coin dengan network BSC
                    console.log(data);
                    /*
                    const TCoins = data.filter(function(item) {
                        return item.networkList.some(function(network) {
                            return network.network === "ETH";
                        });
                    });

                    // Ambil hanya koin beserta status deposit dan withdraw
                    const CoinDepositWithdrawStatus = TCoins.map(function(item) {
                        return {
                            coin: item.coin,
                            feeWDs: item.networkList.some(function(network) {
                                return  network.unLockConfirm;
                            }),
                            depositEnable: item.networkList.some(function(network) {
                                return network.network === "ETH" && network.depositEnable;
                            }),
                            withdrawEnable: item.networkList.some(function(network) {
                                return network.network === "ETH" && network.withdrawEnable;
                            })
                        };
                    });

                    */

                    // Filter data untuk mendapatkan koin-koin dengan jaringan ETH
                    const coinsWithNetwork = data.filter(function(item) {
                        return item.networkList.some(function(network) {
                            return network.network === "ETH";
                        });
                    });

                    // Ambil hanya koin beserta status deposit dan withdraw untuk jaringan 
                    const coinDepositWithdrawStatus = coinsWithNetwork.map(function(item) {
                        const Network = item.networkList.find(function(network) {
                            return network.network === "ETH";
                        });
                        
                        return {
                            coin: item.coin,
                            feeWDs: Network ? Network.withdrawFee : 0,
                            depositEnable: Network ? Network.depositEnable : false,
                            withdrawEnable: Network ? Network.withdrawEnable : false
                        };
                    });

                    // Simpan data pada localStorage
                    localStorage.setItem("ME_WALLETETH", JSON.stringify(coinDepositWithdrawStatus));
                },
                error: function(xhr, status, error) {
                    toastr.error('UPDATE WALLET BINANCE GAGAL!!');
                }
            });
          }
});
</script>

</body>
</html>
